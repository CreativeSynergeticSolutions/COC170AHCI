!function(){var isGoodBrowser=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("msie 6")>-1||e.indexOf("msie 7")>-1;return!t};if(isGoodBrowser()){var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,c,l,d,f,p,g,m,h=n&&n.split("/"),v=x.map,w=v&&v["*"];if(e&&(e=e.split("/"),l=e.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(m=h.slice(0,h.length-1),e=m.concat(e)),t(e),e=e.join("/")),r&&v&&(h||w)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),h)for(u=h.length;u>0;u-=1)if(o=getOwn(v,h.slice(0,u).join("/")),o&&(o=getOwn(o,c))){d=o,f=s;break e}!p&&w&&getOwn(w,c)&&(p=getOwn(w,c),g=s)}!d&&p&&(d=p,f=g),d&&(a.splice(0,f,d),e=a.join("/"))}return i=getOwn(x.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===y.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(x.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),y.require.undef(e),y.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,c,l=null,d=t?t.name:null,f=e,p=!0,g="";return e||(p=!1,e="_@r"+(j+=1)),c=o(e),l=c[0],e=c[1],l&&(l=n(l,d,i),s=getOwn(T,l)),e&&(l?g=s&&s.normalize?s.normalize(e,function(e){return n(e,d,i)}):-1===e.indexOf("!")?n(e,d,i):e:(g=n(e,d,i),c=o(g),l=c[0],g=c[1],r=!0,a=y.nameToUrl(g))),u=!l||s||r?"":"_unnormalized"+(M+=1),{prefix:l,name:g,parentMap:t,unnormalized:!!u,url:a,originalName:f,isDefine:p,id:(l?l+"!"+g:g)+u}}function s(e){var t=e.id,n=getOwn(C,t);return n||(n=C[t]=new y.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(C,r);!hasProp(T,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(T[r])}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(C,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(apsp.apply(E,[E.length,0].concat(globalDefQueue)),globalDefQueue=[])}function d(e){delete C[e],delete q[e]}function f(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(C,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,T[o]),e.check()):f(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*x.waitSeconds,o=n&&y.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,l=!0;if(!w){if(w=!0,eachProp(q,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return l=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=y.contextName,c(e);l&&each(s,function(e){f(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||k||(k=setTimeout(function(){k=0,p()},50)),w=!1}}function g(e){hasProp(T,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function h(e){var t=e.currentTarget||e.srcElement;return m(t,y.onScriptLoad,"load","onreadystatechange"),m(t,y.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(l();E.length;){if(e=E.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}}var w,b,y,_,k,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},q={},S={},E=[],T={},P={},O={},j=1,M=1;return _={require:function(e){return e.require?e.require:e.require=y.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?T[e.map.id]=e.exports:e.exports=T[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(x.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(S,e.id)||{},this.map=e,this.shim=getOwn(x.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,y.startTime=(new Date).getTime();var e=this.map;return this.shim?void y.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,y.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=y.execCb(n,o,r,i)}catch(a){e=a}else i=y.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(T[n]=i,req.onResourceLoad&&req.onResourceLoad(y,this.map,this.depMaps)),d(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,l,f=getOwn(O,this.map.id),p=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,m=y.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,g,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap),u(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),l=getOwn(C,o.id),void(l&&(this.depMaps.push(o),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):f?(this.map.url=y.nameToUrl(f),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(C,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),c(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),s(u),hasProp(x.config,t)&&(x.config[o]=x.config[t]);try{req.exec(n)}catch(d){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+d,d,[t]))}l&&(useInteractive=!0),this.depMaps.push(u),y.completeLoad(o),m([o],i)}),void r.load(e.name,m,i,x))})),y.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){q[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(_,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&u(e,"error",bind(this,this.errback))}n=e.id,r=C[n],hasProp(_,n)||!r||r.enabled||y.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(C,e.id);t&&!t.enabled&&y.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},y={config:x,contextName:e,registry:C,defined:T,urlFetched:P,defQueue:E,Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=x.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(x[t]||(x[t]={}),mixin(x[t],e,!0,!0)):x[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=y.makeShimExports(e)),t[n]=e}),x.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(x.paths[n]=e.location),x.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&y.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,u){var l,d,f;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(_,n)?_[n](C[t.id]):req.get?req.get(y,n,t,o):(d=a(n,t,!1,!0),l=d.id,hasProp(T,l)?T[l]:c(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),y.nextTick(function(){v(),f=s(a(null,t)),f.skipMap=i.skipMap,f.init(n,r,u,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),y.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(T,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(T,e)||hasProp(C,e)}}),t||(o.undef=function(e){l();var n=a(e,t,!0),i=getOwn(C,e);r(e),delete T[e],delete P[n.url],delete S[e],eachReverse(E,function(t,n){t[0]===e&&E.splice(n,1)}),i&&(i.events.defined&&(S[e]=i.events),d(e))}),o},enable:function(e){var t=getOwn(C,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(x.shim,e)||{},a=o.exports;for(l();E.length;){if(n=E.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);g(n)}if(r=getOwn(C,e),!t&&!hasProp(T,e)&&r&&!r.inited){if(!(!x.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));g([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,c,l=getOwn(x.pkgs,e);if(l&&(e=l),c=getOwn(O,e))return y.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=x.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s+=t||(/^data\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+s}return x.urlArgs?s+((-1===s.indexOf("?")?"?":"&")+x.urlArgs):s},load:function(e,t){req.load(y,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=h(e);y.completeLoad(t.id)}},onScriptError:function(e){var t=h(e);return i(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},y.require=y.makeRequire(),y}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("json",[],function(){var JSON={};return function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function stringifyDate(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u instanceof Date?u=stringifyDate(u):(u instanceof String||u instanceof Number||u instanceof Boolean)&&(u=u.valueOf()),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("cookieman/get_domains",["require","exports","module"],function(e,t,n){n.exports=function(e){var t,n=[],r=e.split("."),i=0,o=r.length;for(i;o-1>i;i++)t=r.slice(i,r.length).join("."),n.push(t,"."+t);return n.push(null),n}}),define("cookieman/get_paths",["require","exports","module"],function(e,t,n){n.exports=function(e){e=e.replace(/\/$/,"").split("/");var t=[],n=0,r=e.length;for(n;r>n;n++)t.push(e.slice(0,n+1).join("/")||"/");return t}}),define("cookieman/trim",["require","exports","module"],function(e,t,n){n.exports=function(e){return e.replace(/(^\s+|\s+$)/gi,"")}}),define("cookieman/cookieman",["require","exports","module","./get_domains","./get_paths","./trim"],function(e,t,n){!function(){function t(e){var t=[],n=i(),r=0,o=n.length;for(r;o>r;r++)n[r].name===e&&t.push(n[r]);return t}function r(e,t,n){var r=e+"="+t+";";n=n||{},n.expires&&(r+="Expires="+n.expires.toUTCString()+";"),n.path&&(r+="Path="+n.path+";"),n.domain&&(r+="Domain="+n.domain+";"),document.cookie=r}function i(){if(!document.cookie)return[];var e,t=[],n=document.cookie.split(";"),r=0,i=n.length;for(r;i>r;r++)e=n[r].split("="),t.push({name:c(e[0]),value:e[1]&&c(e[1])||null});return t}function o(e,t){var n=i().length;return t=t||{},t.expires=new Date(1),r(e,"",t),i().length!==n}function a(e){var t,n,r=[],i=u(window.location.pathname),a=s(window.location.hostname);if(o(e))return[{path:null,domain:null}];for(t=0;t<a.length;t++)for(n=0;n<i.length;n++)o(e,{path:i[n],domain:a[t]})&&r.push({domain:a[t],path:i[n]});return r}var s=e("./get_domains"),u=e("./get_paths"),c=e("./trim");n.exports={get:t,set:r,cookies:i,clear:o,clearAll:a}}()}),define("cookieman",["cookieman/cookieman"],function(e){return e}),define("base64Int/index",["require","exports","module"],function(e,t,n){function r(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(t,e.length-1-r)*e[r];return n}function i(e,t){for(var n=[];e>0;){var r=e%t;n.unshift(r),e=(e-r)/t}return n}function o(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";n.exports={encode:function(e){return o(i(e,64),function(e){return a[e]}).join("")||a[0]},decode:function(e){return r(o(e.split(""),function(e){return a.indexOf(e)}),64)}}}),define("base64Int",["base64Int/index"],function(e){return e}),define("etc.widget/lib/encoders/helpers",["require","exports","module"],function(e,t,n){function r(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)t(e[n],n);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function o(e,t){return e.decode(e.encode(t))!==t}function a(e,t){var n=!0;return r(e,function(){t.apply(window,arguments)||(n=!1)}),n}function s(e){var t=0;return r(e,function(){t++}),t}function u(e){return isFinite(parseFloat(e))}n.exports={forEach:r,map:i,lossy:o,every:a,size:s,isNumber:u}}),define("etc.widget/lib/encoders/_qb_se",["require","exports","module","base64Int","./helpers","json"],function(e,t,n){var r=e("base64Int"),i=e("./helpers"),o=e("json");n.exports={encoded:function(e){return/^[0-9A-Za-z+\/]+:/.test(e)},canEncode:function(e){var t;try{t=o.parse(e)}catch(n){return!1}return i.every(t,function(e,t){return i.isNumber(t)&&Number(t)>=0&&2===i.size(e)&&i.isNumber(e.e)&&i.isNumber(e.t)&&Number(e.e)>=0&&Number(e.t)>=0})},encode:function(e){var t=[];return i.forEach(o.parse(e),function(e,n){t.push(r.encode(Number(n))+":"+r.encode(Number(e.e))+"&"+r.encode(Number(e.t)))}),t.join("|")},decode:function(e){var t={},n=e.split("|");return i.forEach(n,function(e){var n=r.decode(e.match(/^[^:]+/)[0]),o=i.map(e.match(/[^:]+$/)[0].split("&"),function(e){return r.decode(e)});t[n]={e:o[0],t:o[1]}}),o.stringify(t)}}}),define("etc.widget/lib/encoders/qb_ss_status",["require","exports","module","base64Int","./helpers","json"],function(e,t,n){var r=e("base64Int"),i=e("./helpers"),o=e("json");n.exports={encoded:function(e){return/^[0-9A-Za-z+\/]+:/.test(e)},canEncode:function(e){var t;try{t=o.parse(e)}catch(n){return!1}return 1!==i.size(t)?!1:"object"!=typeof t.b||t.b instanceof Array||i.size(t.b)<1?!1:i.every(t.b,function(e,t){return!i.isNumber(t)||Number(t)<0?!1:e instanceof Array?4!==i.size(e)?!1:i.isNumber(e[0])?Number(e[0])<0||Number(e[0])>1?!1:!i.isNumber(e[1])||Number(e[1]<0)?!1:Number(e[1])!==Number(e[2])?!1:0!==e[3]?!1:!0:!1:!1})},encode:function(e){var t=[],n=o.parse(e).b;return i.forEach(n,function(e,n){t.push(r.encode(Number(n))+":"+r.encode(Math.round(1e3*e[0]))+"&"+r.encode(e[1]))}),t.join("|")},decode:function(e){var t={},n=e.split("|");return i.forEach(n,function(e){var n=r.decode(e.match(/^[^:]+/)[0]),i=e.match(/[^:]+$/)[0].split("&"),o=r.decode(i[1]);t[n]=[r.decode(i[0])/1e3,o,o,0]}),o.stringify({b:t})}}}),define("etc.widget/lib/encoders/ss_opts",["require","exports","module","base64Int","./helpers","json"],function(e,t,n){function r(e){return o.isNumber(e)&&Number(e)>=0}var i=e("base64Int"),o=e("./helpers"),a=e("json");n.exports={encoded:function(e){return/^([0-9A-Za-z+\/]+|_g):/.test(e)},canEncode:function(e){var t;try{t=a.parse(e)}catch(n){return!1}return o.size(t)<1?!1:o.every(t,function(e,t){return"object"!=typeof e?!1:("global"!==t||r(e.session_timer))&&("global"!==t||r(e.refresh_timer))?"global"===t?!0:!o.isNumber(t)||Number(t)<0?!1:o.every(e,function(e,t){return/^(close_time|close_duration|times_activated|times_activated_session)$/.test(t)&&r(e)?!0:!1}):!1})},encode:function(e){var t=[];return o.forEach(a.parse(e),function(e,n){var r;r="global"===n?[i.encode(e.session_timer),i.encode(e.refresh_timer)]:[e.times_activated?i.encode(e.times_activated):"",e.times_activated_session?i.encode(e.times_activated_session):"",e.close_time?i.encode(e.close_time):"",e.close_duration?i.encode(e.close_duration):""],t.push(("global"===n?"_g":i.encode(Number(n)))+":"+r.join("&"))}),t.join("|")},decode:function(e){var t={},n=e.split("|");return o.forEach(n,function(e){var n,r=e.match(/^[^:]+/)[0],o=e.match(/[^:]+$/)[0].split("&");"_g"===r?(r="global",n={session_timer:i.decode(o[0]),refresh_timer:i.decode(o[1])}):(n={},r=i.decode(r),o[0]&&""!==o[0]&&(n.times_activated=i.decode(o[0])),o[1]&&""!==o[1]&&(n.times_activated_session=i.decode(o[1])),o[2]&&""!==o[2]&&(n.close_time=i.decode(o[2])),o[3]&&""!==o[3]&&(n.close_duration=i.decode(o[3]))),t[r]=n}),a.stringify(t)}}}),define("etc.widget/lib/compressed_cookie",["require","exports","module","cookieman","./encoders/_qb_se","./encoders/qb_ss_status","./encoders/ss_opts"],function(e,t,n){function r(e){var t=s.get(e),n=t.length?t[0].value&&unescape(t[0].value):null;return n&&u[e]&&u[e].encoded(n)?u[e].decode(n):n}function i(e,t,n,r){t=u[e]&&u[e].canEncode(t)?u[e].encode(t):escape(t);var i={};return n&&(i.expires=new Date((new Date).valueOf()+864e5*n)),r&&(i.domain=r),i.path="/",s.set(e,t,i)}function o(e){var t,n,r=[],i=s.get(e),o=0,a=i.length;for(o=0;a>o;o++)t=unescape(i[o].value),n=!1,u[e]&&u[e].encoded(t||"")&&(n=!0,r.push(u[e].decode(t))),n||r.push(t);return r}function a(){return{v1:{get:r,encoders:u}}}var s=e("cookieman"),u={_qb_se:e("./encoders/_qb_se"),qb_ss_status:e("./encoders/qb_ss_status"),ss_opts:e("./encoders/ss_opts")};n.exports={readCookie:r,writeCookie:i,readAllCookies:o,api:a}}),define("etc.widget/lib/cookie",["require","exports","module","./compressed_cookie"],function(e,t,n){var r=e("./compressed_cookie");n.exports={readCookie:r.readCookie,readAllCookies:function(e){var t,n,r,i,o,a,s,u;for(o=e+"=",i=document.cookie.split(";"),t=/^\s+|\s+$/g,u=[],a=0,s=i.length;s>a;a+=1)n=i[a].replace(t,""),0===n.indexOf(o)&&(r=unescape(n.substring(o.length)),r.length>0&&u.push(r));return u},writeCookie:function(e,t,n,r){var i,o,a;n?(i=new Date,i.setTime(i.getTime()+864e5*n),o="; expires="+i.toGMTString()):o="",a=escape(e)+"="+escape(t)+o+"; path=/;",r&&(a+=" domain="+r),document.cookie=a}}}),define("match-condition/index",["require","exports","module"],function(e,t,n){function r(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n}function i(e,t){for(var n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function a(e){return"string"==typeof e}function s(e){return e.constructor===Array}function u(e,t){return a(e)&&e.indexOf(t)>-1}function c(e){return s(e)?e.slice(0):[e]}function l(e){return r(e,function(e){return a(e)?e.toLowerCase():e})}n.exports=function(e,t){function n(e){return i(s,function(t){return i(d,function(n){return e(t,n)})})}function r(e){return o(s,function(t){return o(d,function(n){return e(t,n)})})}var a=e.op,s=l(c(e.value)),d=l(c(t));switch(a){case"eq":return r(function(e,t){return t===e});case"neq":return n(function(e,t){return t!==e});case"gt":return r(function(e,t){return t>e});case"lt":return r(function(e,t){return e>t});case"in":return r(function(e,t){return u(t,e)});case"nin":return n(function(e,t){return!u(t,e)});case"regex":return r(function(e,t){return new RegExp(e).test(t)});case"nregex":return n(function(e,t){return!new RegExp(e).test(t)});default:return!1}}}),define("match-condition",["match-condition/index"],function(e){return e}),define("etc.widget/etc",["require","exports","module","json","./lib/cookie","./lib/compressed_cookie","match-condition"],function(e,t,n){n.exports=function(){function t(e,t,n){function r(){s=null,n||(o=e.apply(a,i))}var i,o,a,s;return function(){var u=n&&!s;return i=arguments,a=this,clearTimeout(s),s=setTimeout(r,t),u&&(o=e.apply(a,i)),o}}function n(e){return e&&e.constructor===Array}function r(e,t){var r,i,o;if(n(e))for(r=0,i=e.length;i>r;r++)t(e[r],r);else if(e)for(o in e)e.hasOwnProperty(o)&&t(e[o],o)}var i,o=e("json"),a=e("./lib/cookie"),s=e("./lib/compressed_cookie"),u=e("match-condition");window._qtd=window._qtd||[];var c={statusKey:"qb_ss_status",optsKey:"ss_opts",configKey:"_qb_ss",previewFlag:"smartserve_preview",localPreviewId:"smartserve_local",previewSyncFlag:"smartserve_preview_sync",debugFlag:"smartserve_debug",debugVariable:"_ss_debug",forceCreative:"etcForceCreative",deployedExperiments:{},excludedExperiments:{},defaultConfig:{domain:"",debug:!1,preventSegmentationPing:!1,virtualPageViewOverlap:!1},uvCounter:0,goalCheckers:{pageCategory:{key:"pageviews.customvalues.uv.page.category",val:function(){var e=c.uv("page.category");return"string"==typeof e?e:void 0}},pageSubcategory:{key:"pageviews.customvalues.uv.page.subcategory",val:function(){var e=c.uv("page.subcategory");return"string"==typeof e?e:void 0}},url:{key:"pageviews.url",val:function(){return window.location.href}},event:{key:"pageviews.customvalues.uv.events.action",val:function(e){return"string"==typeof e.action?e.action:void 0}},conversion:{key:"metrics.conversion_rate"}},goalValueMultiple:1e6,start:function(){c.mergeConfig()&&!c.fireForcedCreatives()&&(c.isCookieEnabled()?(c.removeDeadCreatives(),c.calculateExcludedExperiments(),c.activateExistingCreatives(),c.process()):c.pingCookieDisabled()),c.whenUVHasTransaction(c.writeShownFlagsToUV),c.opts&&c.opts.experiments&&c.setupGoals()},setupGoals:function(){c.registerGoals(),c.newPageView(),c.handleExistingUVGoals(),window.uv_listener=window.uv_listener||[],window.uv_listener.push(["on","event",c.handleUVEvent])},getCookieLib:function(){var e=c.opts||window[c.configKey]&&window[c.configKey][0]||{};return e.cookieCompression?s:a},handleExistingUVGoals:function(){var e=window.universal_variable=window.universal_variable||{},t=e.events=e.events||[];r(t,c.handleUVEvent)},registerGoals:function(){var e=c.getExperimentStatus();c.goals={},r(c.opts.experiments,function(t){e[t.id]&&r(t.goals,function(n){n.key!==c.goalCheckers.conversion.key&&(n.send=function(r){var i,o,a;c.experimentSeen(t.id)&&(i=e[t.id],o=c.findCreativeByProbability(i.tc,i.ckg,i.c_prob),a={i:t.iterationId,e:i.e,tc:i.tc,ckg:i.ckg,c:o.creative_id,cm:o.id,p:i.c_prob,s:"0",cnt:o.control?1:0,g:n.id},r&&!isNaN(Number(r))&&(a.ga=Math.round(Number(r)*c.goalValueMultiple)),c.saveAndsendPing(a))},c.goals[n.key]=c.goals[n.key]||[],c.goals[n.key].push(n))})})},experimentSeen:function(e){var t;return r(c.getShownFlags(),function(n){n.e===e&&(t=!0)}),t},handleUVEvent:function(e){e&&e.action&&("newPageView"===e.action&&c.newPageView(),c.checkGoal("event",e))},newPageView:function(){c.checkGoal("pageCategory"),c.checkGoal("pageSubcategory"),c.checkGoal("url")},checkGoal:function(e,t){var n=c.goalCheckers[e].key,i=c.goalCheckers[e].val(t),o=c.goals[n];i&&r(o,function(e){u(e,i)&&(t&&t.value?e.send(t.value):e.send())})},uv:function(e){var t=window.universal_variable;return t?(r(e.split("."),function(e){t&&(t=t[e]?t[e]:!1)}),t):t},getExperimentStatus:function(){var e=c.getStatus(),t={};return r(e.c,function(e){t[e.e]=e}),t},isCookieEnabled:function(){var e,t,n;return e="etc_test_"+Math.round(1e3*Math.random()),t="Q",c.getCookieLib().writeCookie(e,t,null,c.opts.domain),n=t===c.getCookieLib().readCookie(e),n&&c.getCookieLib().writeCookie(e,t,-1,c.opts.domain),n},sendSegmentationPing:function(){return!c.opts.preventSegmentationPing},fireForcedCreatives:function(){return c.getUrl().indexOf("etcForceCreative")>=0?c.fireForcedCreativeViaQueryParam():c.getCookieLib().readCookie(c.forceCreative)?c.fireForcedCreativeViaCookie():void 0
},executionWrapper:function(e){return c.opts.virtualPageViewOverlap?e:c.ifSamePageView(e)},fireForcedCreativeViaQueryParam:function(){var e,t,n,r,i,o;n=c.getUrl();try{i=n.substring(n.indexOf("?")+1).split("&")}catch(a){i=[]}if(i.length>0){for(e=0,t=i.length;t>e;e+=1)r=i[e].split("="),r[0]===c.forceCreative&&(o=c.opts.creatives[r[1]],o.activation(c.generateCreativeActivator(null,null,null,o,-1,c.executionWrapper(o.execution))));return!0}return!1},fireForcedCreativeViaCookie:function(){var e,t,n,r;for(n=o.parse(c.getCookieLib().readCookie(c.forceCreative)),e=0,t=n.length;t>e;e+=1)r=c.opts.creatives[n[e]],r.activation(c.generateCreativeActivator(null,null,null,r,-1,c.executionWrapper(r.execution)));return e>0?!0:void 0},getUrl:function(){return document.location.href},removeDeadCreatives:function(){var e,t,n,r,i,o,a,s;for(a=12096e5,s=(new Date).getTime(),r=c.getStatus(),o=c.getOptsStatus(),i={},e=0,t=c.opts.experiments.length;t>e;e+=1)c.opts.experiments[e].pausedAt?s-c.opts.experiments[e].pausedAt<a&&(i[c.opts.experiments[e].id]=!0):i[c.opts.experiments[e].id]=!0;for(n in r.c)r.c.hasOwnProperty(n)&&(i[r.c[n].e]||delete r.c[n]);for(n in o)o.hasOwnProperty(n)&&"global"!==n&&(c.opts.creatives[n]?i[c.opts.creatives[n].e_id]||delete o[n]:delete o[n]);c.writeOptsStatus(o),c.writeStatus(r)},calculateExcludedExperiments:function(){var e,t,n;t=c.getStatus().c,n=c.opts.creatives;for(e in t)t.hasOwnProperty(e)&&(n[e]||(c.excludedExperiments[t[e].e]=!0))},inCreative:function(e){var t,n;n=!1;for(t in e.c)e.c.hasOwnProperty(t)&&(n=!0);return n},generateProbability:function(){return Math.round(1e3*Math.random())/1e3},pingCookieDisabled:function(){window._qtd.push({data:{smartserve_cookie_disabled:1}})},getPageViewId:function(){return window.__pageViewId__},mergeConfig:function(){if(window[c.configKey]){var e,t=window[c.configKey];if(!t||!t[0])return!1;c.opts={};for(e in c.defaultConfig)c.defaultConfig.hasOwnProperty(e)&&(c.opts[e]=c.defaultConfig[e]);return c.deepMerge(c.opts,t[0]),c.opts.pageViewId=c.getPageViewId(),!0}return!1},deepMerge:function(e,t){var n,r,i;for(n in t)t.hasOwnProperty(n)&&(r=e[n],i=t[n],r&&i&&"object"==typeof i?c.deepMerge(r,i):e[n]=i)},activateExistingCreatives:function(){var e,t,n,r,i,a;t=c.getStatus(),a=c.getPausedExperimentIds(),i=o.parse(o.stringify(t.c));for(e in i)i.hasOwnProperty(e)&&(r=i[e],a.hasOwnProperty(r.e)||c.excludedExperiments.hasOwnProperty(r.e)||(n=c.findCreativeByProbability(r.tc,r.ckg,r.c_prob),c.pingCreativeState(r.e,r.tc,r.ckg,n,r.c_prob,"0"),n.activation(c.generateCreativeActivator(r.e,r.tc,r.ckg,n,r.c_prob,c.executionWrapper(c.activateCreative))),c.deployedExperiments[n.e_id]=!0,e!==n.id&&(delete t.c[e],r.c=n.id,r.start=(new Date).getTime(),t.c[n.id]=r)));c.writeStatus(t)},getPausedExperimentIds:function(){var e,t,n,r;for(n=c.opts.experiments,r={},e=0,t=n.length;t>e;e+=1)n[e].pausedAt&&(r[n[e].id]=!0);return r},findExperimentById:function(e){var t,n,r,i;for(r=c.opts.experiments||[],t=0,n=r.length;n>t;t+=1)if(r[t].id===e){i=r[t];break}return i},findCreativeByProbability:function(e,t,n){var r,i,o;return r=c.opts.targetingCriteria[e],i=r.creatives[t],o=c.getRandomCreativeIndex(n,i),c.opts.creatives[i[o].id]},process:function(){var e,t,n,r;for(r=c.opts.experiments,e=0,t=r.length;t>e;e+=1)n=r[e],n.pausedAt||c.deployedExperiments[n.id]||c.excludedExperiments[n.id]||c.chooseTargetingCriteria(n)},chooseTargetingCriteria:function(e){var t;1===e.targetingCriteria.length?c.fireSingleTargetingCriteria(e):(t=e.ordered?c.chooseOrderedTargetingCriteria(e):c.chooseRandomTargetingCriteria(e),t&&c.setCreatives(e,t,t.creatives))},fireSingleTargetingCriteria:function(e){var t,n,r;t=!1,n=c.opts.targetingCriteria[e.targetingCriteria[0]],r=function(){t||(t=!0,c.shouldFireTargetingCriteriaBasedOnRate(n)&&c.setCreatives(e,n,n.creatives))},n.condition(r)&&r()},chooseOrderedTargetingCriteria:function(e){var t,n,r;for(t=0,n=e.targetingCriteria.length;n>t;t+=1)if(r=c.opts.targetingCriteria[e.targetingCriteria[t]],c.shouldFireTargetingCriteria(r))return r;return null},chooseRandomTargetingCriteria:function(e){var t,n;for(n=e.targetingCriteria.concat([]);n.length>0;)if(t=n.splice(c.getRandomIndex(n),1),t=c.opts.targetingCriteria[t[0]],c.shouldFireTargetingCriteria(t))return t;return null},shouldFireTargetingCriteria:function(e){return e.condition()&&c.shouldFireTargetingCriteriaBasedOnRate(e)},shouldFireTargetingCriteriaBasedOnRate:function(e){return e.firingRate===i||Math.random()<e.firingRate},getRandomIndex:function(e){return Math.floor(Math.random()*e.length,10)},setCreatives:function(e,t,n){var r,i,o,a,s,u;for(r=0,i=n.length;i>r;r+=1)a=n[r],o=c.generateProbability(),s=c.getRandomCreativeIndex(o,a),u=a[s].id,c.setCreative(e,t,r,c.opts.creatives[u],o)},getRandomCreativeIndex:function(e,t){var n,r,i=0;for(n=0,r=t.length;r>n;n+=1)if(i+=t[n].p,i>e)return n;return-1},setCreative:function(e,t,n,r,i){c.saveCreative(e,t,n,r,i),c.pingCreativeState(e.id,t.id,n,r,i,"0"),r.activation(c.generateCreativeActivator(e.id,t.id,n,r,i,c.executionWrapper(c.activateCreative)))},saveCreative:function(e,t,n,r,i){var o=c.getStatus();o.c[r.id]={e:e.id,tc:t.id,ckg:n,c:r.id,c_prob:i,start:(new Date).getTime()},c.writeStatus(o)},generateCreativeActivator:function(e,t,n,r,i,o){var a,s=1;return c.dependencyTimers=[]||c.dependencyTimers,a=function(){!r.dependencies||c.dependenciesExist(r.dependencies)?o(e,t,n,r,i):(s*=2,s>500&&(s=500),c.dependencyTimers.push(setTimeout(a,s)))}},clearTimers:function(){r(c.dependencyTimers,clearTimeout),c.dependencyTimers=[]},dependenciesExist:function(e){var t,n;for(t=0,n=e.length;n>t;t+=1)try{if(!e[t]())break}catch(r){break}return t===n},activateCreative:function(e,t,n,r,i){try{r.execution(),c.pingCreativeState(e,t,n,r,i,"1")}catch(o){c.pingCreativeState(e,t,n,r,i,"9",o.message)}},isSamePageView:function(e){return!e||e===c.getPageViewId()},ifSamePageView:function(e){var t=c.opts.pageViewId;return function(){return c.isSamePageView(t)?e.apply(c,arguments):void 0}},extractProbabilty:function(e,t){var n,r,i;for(i=null,n=0;n<e.length;n+=1)for(r=0;r<e[n].length;r+=1)e[n][r].id===t&&(i=e[n][r].p);return i},whenUVHasTransaction:function(e){clearTimeout(c.uvHasTransactionTimeout),c.uvCounter+=1,window.universal_variable&&window.universal_variable.transaction?e():c.uvCounter<30&&(c.uvHasTransactionTimeout=setTimeout(function(){c.whenUVHasTransaction(e)},1e3))},writeShownFlagsToUV:function(){c.getCookieLib().readCookie("_qb_se")&&(window.universal_variable.transaction.shown_creatives=c.getShownFlags(),window._qtd.push({resendUniversalVariables:1}))},getShownFlags:function(){var e,t=[],n=c.getCookieLib().readCookie("_qb_se");if(n)try{n=o.parse(n);for(e in n)n.hasOwnProperty(e)&&t.push({cm:e,e:n[e].e})}catch(r){}return t},_storeShownFlags:function(e){var t,n,r=c.getCookieLib().readCookie("_qb_se");if(r)try{r=o.parse(r)}catch(i){r={}}else r={};r[e.cm]={e:e.e,t:+new Date},n=+new Date,n-=2592e6;for(t in r)r.hasOwnProperty(t)&&r[t].t<n&&delete r[t];c.getCookieLib().writeCookie("_qb_se",o.stringify(r),365,c.opts.domain)},storeShownFlags:function(){var e,t,n=window.qb_etc_data;for(e=0;e<n.length;e+=1)t=n[e],"1"===t.s&&c._storeShownFlags(t)},pingCreativeState:function(e,t,n,r,i,o,a){var s,u,l,d;try{u=c.opts.targetingCriteria[t].creatives}catch(f){u=[]}d=c.findExperimentById(e),s=c.extractProbabilty(u,r.id),l={e:e,tc:t,ckg:n,c:r.creative_id,cm:r.id,p:i,s:o,cnt:r.control?1:0},d&&d.iterationId&&(l.i=d.iterationId),a&&(l.err_e=a),null!==s&&(l.pc=s),c.saveAndsendPing(l),c.storeShownFlags()},uvListenerSupport:function(){var e=window.__qubit;return e&&e.qtracker&&e.qtracker.options&&e.qtracker.options.uvLocation},onQtrackerReady:function(e){window._qtd=window._qtd||[],c.isNative(window._qtd.push)?setTimeout(function(){c.onQtrackerReady(e)},500):e()},isNative:function(e){return/\[native code\]/.test(e.toString())},saveAndsendPing:function(e){var t="qb_etc_data",n="0"===e.s;window[t]=window[t]||[],(!n||c.sendSegmentationPing())&&(window[t].push(e),c.onQtrackerReady(function(){c.uvListenerSupport()?c.publishWithUV(t):c.publishWithQtd(t)}))},publishWithQtd:function(e){var t={data:{}};t.data[e]=window[e],window._qtd.push(t)},publishWithUV:function(e){var t=window.universal_variable=window.universal_variable||{};t.qb=t.qb||{},t.qb[e]=window[e],c.resendUVs()},resendUVs:t(function(){window._qtd.push({resendUniversalVariables:1})},100),getStatus:function(){return c.extractStatus(c.getCookieLib().readCookie(c.statusKey))},getOptsStatus:function(){var e,t;if(e=c.getCookieLib().readCookie(c.optsKey)){try{t=o.parse(e)}catch(n){t={}}return t}return{}},extractStatus:function(e){return e?c.transformToInternalJSON(o.parse(e)):c.createDefaultStatus()},transformToExternalJSON:function(e){var t,n,r;if(r={b:{}},e.c)for(t in e.c)e.c.hasOwnProperty(t)&&(n=e.c[t],r.b[t]=[],r.b[t].push(n.c_prob),r.b[t].push(n.e),r.b[t].push(n.tc),r.b[t].push(n.ckg));return e.cg&&(r.cg=e.cg),r},transformToInternalJSON:function(e){var t,n,r;if(!e.b)return e;r=c.createDefaultStatus(),e.cg&&(r.cg=e.cg);for(t in e.b)e.b.hasOwnProperty(t)&&(n=e.b[t],r.c[t]={c_prob:n[0],e:n[1],tc:n[2],ckg:n[3],c:Number(t)});return r},createDefaultStatus:function(){return{c:{}}},writeStatus:function(e){var t=c.transformToExternalJSON(e);c.getCookieLib().writeCookie(c.statusKey,o.stringify(t),365,c.opts.domain)},writeOptsStatus:function(e){c.getCookieLib().writeCookie(c.optsKey,o.stringify(e),365,c.opts.domain)},isPreview:function(){return c.getCookieLib().readCookie(c.previewFlag)||document.location.href.indexOf(c.previewFlag)>-1},isSyncPreview:function(){return c.getCookieLib().readCookie(c.previewSyncFlag)||document.location.href.indexOf(c.previewSyncFlag)>-1||window[c.previewSyncFlag]===!0},isDebug:function(){return document.location.href.indexOf(c.debugFlag)>-1},loadPreview:function(){var e,t,n;e=c.getScript(),e&&!e.isPreview?(n=c.hashParams(),t=[],t.push("//smartserve"),"dd6zx4ibq538k"!==e.distro&&t.push("-dev"),t.push(".s3.amazonaws.com/smartserve-"),t.push(e.id),n[c.localPreviewId]&&t.push("-"+n[c.localPreviewId]),t.push("-preview.js"),c.loadScript(t.join(""))):c.start()},getScript:function(){var e,t,n,r,i,o,a,s=/smartserve-(\d+)(-\w+)?(-preview)?\.js/;for(r=c.getAllScripts(),e=0,t=r.length;t>e;e+=1)if(n=r[e],i=n.getAttribute("src"),i&&i.match(s)&&(o=!!i.match(/(-preview)/),a={isPreview:o,id:i.match(s)[1],distro:i.match(/\/\/(\w+)\.cloudfront\.net/)?i.match(/\/\/(\w+)\.cloudfront\.net/)[1]:i.match(/\/\/([\w\-]+)\.s3/)?i.match(/\/\/([\w\-]+)\.s3/)[1]:"dd6zx4ibq538k"},o))return a;return a},getAllScripts:function(){return document.getElementsByTagName("script")},getHead:function(){return document.getElementsByTagName("head")[0]},loadScript:function(e){if(c.isSyncPreview())document.write(["<scr","ipt src='",e,"'></scr","ipt>"].join(""));else{var t=document.createElement("script");t.src=e,c.getHead().appendChild(t)}},hashParams:function(){var e=c.getUrl();if(-1===e.indexOf("#"))return{};for(var t,n=e.substring(e.indexOf("#")+1).split("&"),r={},i=decodeURIComponent,o=n.length-1;o>=0;o--)t=n[o].split("="),r[i(t[0])]=t[1]?i(t[1]):!0;return r}};return c.isPreview()?(window[c.debugVariable]=!0,c.loadPreview()):window._etc_testing||(c.isDebug()&&(window[c.debugVariable]=!0),c.start()),c}}),function(){function e(){return j.pop()||[]}function t(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function n(e){e.length=0,j.length<I&&j.push(e)}function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}function i(){}function o(e){function t(){if(i){var e=r(i);tt.apply(e,arguments)}if(this instanceof t){var a=at(n.prototype),s=n.apply(a,e||arguments);return h(s)?s:a}return n.apply(o,e||arguments)}var n=e[0],i=e[2],o=e[4];return t}function a(e,t,n){if("function"!=typeof e)return T;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return q(e,t)}function s(e){function t(){var e=l?u:this;if(o){var m=r(o);tt.apply(m,arguments)}if((a||f)&&(m||(m=r(arguments)),a&&tt.apply(m,a),f&&m.length<c))return i|=16,s([n,p?i:-4&i,m,null,u,c]);if(m||(m=arguments),d&&(n=e[g]),this instanceof t){e=at(n.prototype);var v=n.apply(e,m);return h(v)?v:e}return n.apply(e,m)}var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=1&i,d=2&i,f=4&i,p=8&i,g=n;return t}function u(e,t,n,r){for(var i=(r||0)-1,o=e?e.length:0,a=[];++i<o;){var s=e[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(ut(s)||st(s))){t||(s=u(s,t,n));var c=-1,l=s.length,d=a.length;for(a.length+=l;++c<l;)a[d++]=s[c]}else n||a.push(s)}return a}function c(r,i,o,a,s,u){if(o){var l=o(r,i);if("undefined"!=typeof l)return!!l}if(r===i)return 0!==r||1/r==1/i;var d=typeof r,f=typeof i;if(!(r!==r||r&&G[d]||i&&G[f]))return!1;if(null==r||null==i)return r===i;var p=X.call(r),g=X.call(i);if(p==F&&(p=B),g==F&&(g=B),p!=g)return!1;switch(p){case V:case D:return+r==+i;case U:return r!=+r?i!=+i:0==r?1/r==1/i:r==+i;case H:case z:return r==String(i)}var h=p==N;if(!h){var v=et.call(r,"__wrapped__"),w=et.call(i,"__wrapped__");if(v||w)return c(v?r.__wrapped__:r,w?i.__wrapped__:i,o,a,s,u);if(p!=B||!it.nodeClass&&(t(r)||t(i)))return!1;var b=!it.argsObject&&st(r)?Object:r.constructor,y=!it.argsObject&&st(i)?Object:i.constructor;if(b!=y&&!(m(b)&&b instanceof b&&m(y)&&y instanceof y)&&"constructor"in r&&"constructor"in i)return!1}var _=!s;s||(s=e()),u||(u=e());for(var k=s.length;k--;)if(s[k]==r)return u[k]==i;var x=0;if(l=!0,s.push(r),u.push(i),h){if(k=r.length,x=i.length,l=x==k,l||a)for(;x--;){var C=k,q=i[x];if(a)for(;C--&&!(l=c(r[C],q,o,a,s,u)););else if(!(l=c(r[x],q,o,a,s,u)))break}}else mt(i,function(e,t,n){return et.call(n,t)?(x++,l=et.call(r,t)&&c(r[t],e,o,a,s,u)):void 0}),l&&!a&&mt(r,function(e,t,n){return et.call(n,t)?l=--x>-1:void 0});return s.pop(),u.pop(),_&&(n(s),n(u)),l}function l(e,t,n,r,i){(ut(t)?y:ht)(t,function(t,o){var a,s,u=t,c=e[o];if(t&&((s=ut(t))||vt(t))){for(var d=r.length;d--;)if(a=r[d]==t){c=i[d];break}if(!a){var f;n&&(u=n(c,t),(f="undefined"!=typeof u)&&(c=u)),f||(c=s?ut(c)?c:[]:vt(c)?c:{}),r.push(t),i.push(c),f||l(c,t,n,r,i)}}else n&&(u=n(c,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(c=u);e[o]=c})}function d(e,t,n,r,i,a){var u=2&t,c=16&t,l=32&t;if(!u&&!m(e))throw new TypeError;c&&!n.length&&(t&=-17,c=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var d=1==t||17===t?o:s;return d([e,t,n,r,i,a])}function f(){$.shadowedProps=A,$.array=$.bottom=$.loop=$.top="",$.init="iterable",$.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)$[n]=e[n];var r=$.args;$.firstArg=/^[^,]+/.exec(r)[0];var i=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+ot($)+"\n}");return i(a,L,J,et,M,st,ut,v,Z,G,rt,z,Y,X)}function p(e){var t=[];return mt(e,function(e,n){m(e)&&t.push(n)}),t.sort()}function g(e){return e===!0||e===!1||e&&"object"==typeof e&&X.call(e)==V||!1}function m(e){return"function"==typeof e}function h(e){return!(!e||!G[typeof e])}function v(e){return"string"==typeof e||e&&"object"==typeof e&&X.call(e)==z||!1}function w(t){var i=arguments,o=2;if(!h(t))return t;if("number"!=typeof i[2]&&(o=i.length),o>3&&"function"==typeof i[o-2])var s=a(i[--o-1],i[o--],2);else o>2&&"function"==typeof i[o-1]&&(s=i[--o]);for(var u=r(arguments,1,o),c=-1,d=e(),f=e();++c<o;)l(t,u[c],s,d,f);return n(d),n(f),t}function b(e,t,n){var r=!0;if(t=i.createCallback(t,n,3),ut(e))for(var o=-1,a=e.length;++o<a&&(r=!!t(e[o],o,e)););else pt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function y(e,t,n){if(t&&"undefined"==typeof n&&ut(e))for(var r=-1,i=e.length;++r<i&&t(e[r],r,e)!==!1;);else pt(e,t,n);return e}function _(e,t,n){var r=-1,o=e?e.length:0,a=Array("number"==typeof o?o:0);if(t=i.createCallback(t,n,3),ut(e))for(;++r<o;)a[r]=t(e[r],r,e);else pt(e,function(e,n,i){a[++r]=t(e,n,i)});return a}function x(e,t,n,r){var o=arguments.length<3;if(t=i.createCallback(t,r,4),ut(e)){var a=-1,s=e.length;for(o&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e)}else pt(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)});return n}function C(e,t,n){var r;if(t=i.createCallback(t,n,3),ut(e))for(var o=-1,a=e.length;++o<a&&!(r=t(e[o],o,e)););else pt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function q(e,t){return arguments.length>2?d(e,17,r(arguments,2),null,t):d(e,1,null,null,t)}function S(e){for(var t=arguments.length>1?u(arguments,!0,!1,1):p(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=d(e[i],1,null,null,e)}return e}function E(e,t,n){var r=typeof e;if(null==e||"function"==r)return a(e,t,n);if("object"!=r)return O(e);var i=ct(e),o=i[0],s=e[o];return 1!=i.length||s!==s||h(s)?function(t){for(var n=i.length,r=!1;n--&&(r=c(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function T(e){return e}function P(){}function O(e){return function(t){return t[e]}}var j=[],M={},I=40,A=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],F="[object Arguments]",N="[object Array]",V="[object Boolean]",D="[object Date]",L="[object Error]",R="[object Function]",U="[object Number]",B="[object Object]",H="[object RegExp]",z="[object String]",$={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},W=G[typeof window]&&window||this,Q=G[typeof global]&&global;!Q||Q.global!==Q&&Q.window!==Q||(W=Q);var K=[],J=Error.prototype,Z=Object.prototype,Y=String.prototype,X=Z.toString,et=Z.hasOwnProperty,tt=K.push,nt=Z.propertyIsEnumerable,rt={};rt[N]=rt[D]=rt[U]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},rt[V]=rt[z]={constructor:!0,toString:!0,valueOf:!0},rt[L]=rt[R]=rt[H]={constructor:!0,toString:!0},rt[B]={constructor:!0},function(){for(var e=A.length;e--;){var t=A[e];for(var n in rt)et.call(rt,n)&&!et.call(rt[n],t)&&(rt[n][t]=!1)}}();var it=i.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);it.argsClass=!1,it.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),it.enumErrorProps=nt.call(J,"message")||nt.call(J,"name"),it.enumPrototypes=nt.call(e,"prototype"),it.nonEnumArgs=0!=r,it.nonEnumShadows=!/valueOf/.test(n),it.ownLast="x"!=n[0],it.spliceObjects=(K.splice.call(t,0,1),!t[0]),it.unindexedChars="x"[0]+Object("x")[0]!="xx";try{it.nodeClass=!(X.call(document)==B&&!({toString:0}+""))}catch(i){it.nodeClass=!0}}(1);var ot=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",it.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):it.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),it.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),it.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(it.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),it.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",it.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||it.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"},at=function(){function e(){}return function(t){if(h(t)){e.prototype=t;var n=new e;e.prototype=null}return n||W.Object()}}(),st=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&et.call(e,"callee")&&!nt.call(e,"callee")||!1},ut=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&X.call(e)==N||!1},ct=f({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),lt={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},dt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},ft={top:"if (!objectTypes[typeof iterable]) return result;\n"+lt.top,array:!1},pt=f(lt),gt=f(dt,{top:dt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),mt=f(lt,ft,{useHas:!1}),ht=f(lt,ft);m(/x/)&&(m=function(e){return"function"==typeof e&&X.call(e)==R});var vt=function(e){var n,r;return!e||X.call(e)!=B||(n=e.constructor,m(n)&&!(n instanceof n))||!it.argsClass&&st(e)||!it.nodeClass&&t(e)?!1:it.ownLast?(mt(e,function(e,t,n){return r=et.call(n,t),!1}),r!==!1):(mt(e,function(e,t){r=t}),"undefined"==typeof r||et.call(e,r))},wt=_;i.assign=gt,i.bind=q,i.bindAll=S,i.createCallback=E,i.forEach=y,i.forIn=mt,i.forOwn=ht,i.functions=p,i.keys=ct,i.map=_,i.merge=w,i.pluck=wt,i.property=O,i.collect=_,i.each=y,i.extend=gt,i.methods=p,i.every=b,i.identity=T,i.isArguments=st,i.isArray=ut,i.isBoolean=g,i.isFunction=m,i.isObject=h,i.isPlainObject=vt,i.isString=v,i.noop=P,i.reduce=x,i.some=C,i.all=b,i.any=C,i.foldl=x,i.inject=x,i.VERSION="2.4.1","function"==typeof define&&"object"==typeof define.amd&&define.amd&&define("mini_lodash",[],function(){return i})}.call(this),function(e){e("when",[],function(){function e(e,n,r,i){return t(e).then(n,r,i)}function t(e){var t;return t=e instanceof i?e:u(e)?n(e):o(e)}function n(e){var t=s();try{e.then(function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.progress(e)})}catch(n){t.reject(n)}return t.promise}function r(t){return e(t,a)}function i(e){this.then=e}function o(e){var n=new i(function(n){try{return t("function"==typeof n?n(e):e)}catch(r){return a(r)}});return n}function a(e){var n=new i(function(n,r){try{return t("function"==typeof r?r(e):a(e))}catch(i){return a(i)}});return n}function s(){function e(e,t,n){return f(e,t,n)}function n(e){return g(t(e))}function r(e){return g(a(e))}function o(e){return p(e)}var u,c,l,d,f,p,g;return c=new i(e),u={then:e,resolve:n,reject:r,progress:o,notify:o,promise:c,resolver:{resolve:n,reject:r,progress:o,notify:o}},l=[],d=[],f=function(e,t,n){var r,i;return r=s(),i="function"==typeof n?function(e){try{r.notify(n(e))}catch(t){r.notify(t)}}:function(e){r.notify(e)},l.push(function(n){n.then(e,t).then(r.resolve,r.reject,i)}),d.push(i),r.promise},p=function(e){return h(d,e),e},g=function(e){return f=e.then,g=t,p=b,h(l,e),d=l=k,e},u}function u(e){return e&&"function"==typeof e.then}function c(t,n,r,i,o){return v(2,arguments),e(t,function(t){function a(e){m(e)}function u(e){g(e)}var c,l,d,f,p,g,m,h,v,b;if(v=t.length>>>0,c=Math.max(0,Math.min(n,v)),d=[],l=v-c+1,f=[],p=s(),c)for(h=p.notify,m=function(e){f.push(e),--l||(g=m=w,p.reject(f))},g=function(e){d.push(e),--c||(g=m=w,p.resolve(d))},b=0;v>b;++b)b in t&&e(t[b],u,a,h);else p.resolve(d);return p.promise.then(r,i,o)})}function l(e,t,n,r){function i(e){return t?t(e[0]):e[0]}return c(e,1,i,n,r)}function d(e,t,n,r){return v(1,arguments),p(e,b).then(t,n,r)}function f(){return p(arguments,b)}function p(t,n){return e(t,function(t){var r,i,o,a,u,c;if(o=i=t.length>>>0,r=[],c=s(),o)for(a=function(t,i){e(t,n).then(function(e){r[i]=e,--o||c.resolve(r)},c.reject,c.notify)},u=0;i>u;u++)u in t?a(t[u],u):--o;else c.resolve(r);return c.promise})}function g(t,n){var r=_.call(arguments,1);return e(t,function(t){var i;return i=t.length,r[0]=function(t,r,o){return e(t,function(t){return e(r,function(e){return n(t,e,o,i)})})},y.apply(t,r)})}function m(t,n,r){var i=arguments.length>2;return e(t,function(e){return e=i?r:e,n.resolve(e),e},function(e){return n.reject(e),a(e)},function(e){return"function"==typeof n.notify&&n.notify(e),e})}function h(e,t){for(var n,r=0;n=e[r++];)n(t)}function v(e,t){for(var n,r=t.length;r>e;)if(n=t[--r],null!=n&&"function"!=typeof n)throw new Error("arg "+r+" must be a function")}function w(){}function b(e){return e}var y,_,k;return e.defer=s,e.resolve=t,e.reject=r,e.join=f,e.all=d,e.map=p,e.reduce=g,e.any=l,e.some=c,e.chain=m,e.isPromise=u,i.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(k,e)},"yield":function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return d(t,function(t){return e.apply(k,t)})})}},_=[].slice,y=[].reduce||function(e){var t,n,r,i,o;if(o=0,t=Object(this),i=t.length>>>0,n=arguments,n.length<=1)for(;;){if(o in t){r=t[o++];break}if(++o>=i)throw new TypeError}else r=n[1];for(;i>o;++o)o in t&&(r=e(r,t[o],o,t));return r},e})}("function"==typeof define&&define.amd?define:function(e){"object"==typeof exports?module.exports=e():this.when=e()}),define("events",["require"],function(){var e=[],t=e.slice,n=/\s+/,r=function(e,t,r,i){if(!r)return!0;if("object"==typeof r)for(var o in r)e[t].apply(e,[o,r[o]].concat(i));else{if(!n.test(r))return!0;for(var a=r.split(n),s=0,u=a.length;u>s;s++)e[t].apply(e,[a[s]].concat(i))}},i=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},o={on:function(e,t,n){if(!r(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},off:function(e,t,n){var i,o,a,s,u,c,l,d;if(!this._events||!r(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:_.keys(this._events),u=0,c=s.length;c>u;u++)if(e=s[u],i=this._events[e]){if(a=[],t||n)for(l=0,d=i.length;d>l;l++)o=i[l],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&a.push(o);this._events[e]=a}return this},trigger:function(e){if(!this._events)return this;var n=t.call(arguments,1);if(!r(this,"trigger",e,n))return this;var o=this._events[e],a=this._events.all;return o&&i(o,n),a&&i(a,arguments),this}};return o}),define("logger",["require","json"],function(e){var t=e("json");return{logVariation:function(e,t,n){if(window._ss_debug){var r=["variation",e],i=Array.prototype.slice.call(t,0);r.push.apply(r,i),n?this.logError.apply(this,r):this.log.apply(this,r)}},logExperiment:function(e,t,n){if(window._ss_debug){var r=["experiment",e],i=Array.prototype.slice.call(t,0);r.push.apply(r,i),n?this.logError.apply(this,r):this.log.apply(this,r)}},logError:function(){if(window._ss_debug){var e=Array.prototype.slice.call(arguments,0);if(window.console)try{console.error.apply(console,e)}catch(n){console.error(t.stringify(e))}window._qb_messages=window._qb_messages||[],window._qb_messages.push(e)}},log:function(){if(window._ss_debug){var e=Array.prototype.slice.call(arguments,0);if(window.console)try{console.log.apply(console,e)}catch(n){console.log(t.stringify(e))}window._qb_messages=window._qb_messages||[],window._qb_messages.push(e)}}}}),define("cookie_manager",["require","json","./etc.widget/lib/cookie"],function(e){var t=e("json"),n=e("./etc.widget/lib/cookie"),r="ss_opts",i=function(){return{read:function(e,t){return this.getVariant(e)[t]},readGlobal:function(e){return this.read("global",e)},readInt:function(e,t){var n=this.read(e,t);try{n=parseInt(n,10)||0}catch(r){n=0}return n},write:function(e,n,i){var o=this.getValues(),a=o[e]||(o[e]={});a[n]=i;var s;window._qb_ss&&window._qb_ss[0]&&(s=window._qb_ss[0].domain),this.writeCookie(r,"{}",-1),this.writeCookie(r,"{}",-1,s),this.writeCookie(r,t.stringify(o),365,s)},writeGlobal:function(e,t){this.write("global",e,t)},getValues:function(){var e=this.readCookie(r);return e=e?t.parse(e):{}},getVariant:function(e){var t=this.getValues();return t[e]||(t[e]={})},readCookie:n.readCookie,writeCookie:n.writeCookie}}();return i}),define("exit_checker",["require"],function(){return function(e){var t;return t={defaultConfig:{debugMode:!1,topHeight:150,moveQueueDepth:2,moveDelay:500,moveVel:500,leftGap:10,attachTime:500,returnTime:1e3,eventInterval:100,showProb:1},start:function(){t.isBadBrowser(navigator.userAgent,window)||(t.startTime=(new Date).getTime(),t.setConfig(),t.initVars(),t.waitTillReady())},isBadBrowser:function(e,t){return e.indexOf("iPad")>=0||e.indexOf("iPhone")>=0||e.indexOf("android")>=0||e.indexOf("Android")>=0||e.indexOf("Mobile")>=0||e.indexOf("mobile")>=0||e.indexOf("MSIE 6")>=0||!t.sessionStorage},waitTillReady:function(){document.body&&document.getElementById?t.onReady():setTimeout(t.waitTillReady,100)},onReady:function(){t.opts.attachTime?setTimeout(t.attachEvents,t.opts.attachTime):t.attachEvents()},setConfig:function(){var n,r=e||{};t.opts={};for(n in t.defaultConfig)t.defaultConfig.hasOwnProperty(n)&&(t.opts[n]=t.defaultConfig[n]);t.deepMerge(t.opts,r)},deepMerge:function(e,n){var r,i,o;for(r in n)n.hasOwnProperty(r)&&(i=e[r],o=n[r],i&&o&&"object"==typeof o?t.deepMerge(i,o):e[r]=o)},setDefault:function(e,n){void 0===t.opts[e]&&(t.opts[e]=n)},initVars:function(){t.lastMoves=[]},attachEvents:function(){t.opts.debugMode&&window.console&&console.log("Listening to mouse");var e=document;t.attachMouseMove(e),t.attachMouseOut(e),t.detectField=e},createListenField:function(){var e=document.createElement("div");return e.style.width="100%",e.style.height=t.opts.topHeight+"px",e.style.top="0",e.style.left="0",e.style.position="fixed",e.style.marginLeft=t.opts.leftGap+"px",window.fb_testing&&(e.style.backgroundColor="green",e.style.opacity="0.2"),document.body.appendChild(e),e},attachMouseMove:function(e){e.attachEvent?e.attachEvent("onmousemove",t.onMouseMove):e.addEventListener&&e.addEventListener("mousemove",t.onMouseMove,!1)},onMouseMove:function(e){for(t.lastMoves.push({t:e.debug_time||(new Date).getTime(),x:e.clientX,y:e.clientY});t.lastMoves.length>t.opts.moveQueueDepth;)t.lastMoves.shift();t.returnTimeout&&(clearTimeout(t.returnTimeout),delete t.returnTimeout),e.clientY>t.opts.topHeight&&(t.removeEvent(t.detectField,"mousemove",t.onMouseMove),setTimeout(function(){t.attachMouseMove(document)},t.opts.eventInterval))},attachMouseOut:function(e){e.attachEvent?e.attachEvent("onmouseout",t.onMouseOut):e.addEventListener&&e.addEventListener("mouseout",t.onMouseOut,!0)},onMouseOut:function(){if(!t.returnTimeout){var e,n,r,i,o,a,s=(new Date).getTime();i=t.lastMoves[1],o=t.lastMoves[0],t.opts.debugMode&&window.console&&console.log(i,o),i&&o&&i.t>=s-t.opts.moveDelay&&o.y<=t.opts.topHeight&&(e=i.x-o.x,n=i.y-o.y,r=i.t-o.t,a=Math.sqrt(e*e+n*n)/r*1e3,t.opts.debugMode&&window.console&&(console.log("vel: ",a," ",e," ",n," ",r),console.log("lim: ",t.opts.moveVel)),a>=t.opts.moveVel&&(t.opts.returnTime?(t.returnTimeout=setTimeout(t.tryShowFeedback,t.opts.returnTime),t.removeEvent(t.detectField,"mousemove",t.onMouseMove),setTimeout(function(){t.attachMouseMove(t.detectField)},50)):t.tryShowFeedback()))}},tryShowFeedback:function(){t.removeEvents(),Math.random()<t.opts.showProb&&t.showFeedback()},removeEvents:function(){t.removeEvent(t.detectField,"mousemove",t.onMouseMove),t.removeEvent(t.detectField,"mouseout",t.onMouseOut)
},removeEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener&&e.removeEventListener(t,n)},showFeedback:function(){t.showTime=(new Date).getTime(),t.doShowFeedback()},doShowFeedback:function(){t.opts.callBack()},makeDelegate:function(e){return function(n){e(t.getAPI(),n)}},delegateEvents:function(e,n){if(n){var r,i,o,a;for(r in n)n.hasOwnProperty(r)&&2===r.split(" ").length&&(o=r.split(" ")[0],a=r.split(" ")[1],i=n[r],e.on(o,a,t.makeDelegate(i)));n.load&&n.load(t.getAPI())}}}}}),define("match_condition",["mini_lodash"],function(){function e(e,t){return r.isString(e)&&e.indexOf(t)>-1}function t(e){return r.isArray(e)?e.slice(0):[e]}function n(e){return r.map(e,function(e){return r.isString(e)?e.toLowerCase():e})}var r=require("mini_lodash");return function(i,o){function a(e){return r.all(c,function(t){return r.all(l,function(n){return e(t,n)})})}function s(e){return r.any(c,function(t){return r.any(l,function(n){return e(t,n)})})}var u=i.op,c=n(t(i.value)),l=n(t(o));switch(u){case"eq":return s(function(e,t){return t===e});case"neq":return a(function(e,t){return t!==e});case"gt":return s(function(e,t){return t>e});case"lt":return s(function(e,t){return e>t});case"in":return s(function(t,n){return e(n,t)});case"nin":return a(function(t,n){return!e(n,t)});case"regex":return s(function(e,t){return new RegExp(e).test(t)});default:return!1}}}),define("variation_manager",["require","mini_lodash","when","events","logger","cookie_manager","exit_checker","json","match_condition"],function(require){var _=require("mini_lodash"),when=require("when"),Events=require("events"),logger=require("logger"),CookieManager=require("cookie_manager"),exitChecker=require("exit_checker"),JSON=require("json"),matchCondition=require("match_condition"),on=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)},off=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)},VariationManager=function(id,variation_id,experiment_id,params,cookieManager){cookieManager||(cookieManager=CookieManager);var vm={activation:function(e){this.log("trying to activate");var t=this.log;if(this._bypassTests())return t("Bypassing activation due to URL parameter."),t("activating"),e(),!0;var n=this._getTests(),r=0,i=_.bind(function(){var o=_.map(n[r],function(e){return e()});when.all(o).then(function(o){var a=_.all(o,function(e){return e});a&&(r+=1,r===n.length?(t("activating"),e()):i())})},this);i()},_bypassTests:function(){return this._getUrl().indexOf("bypass_activation")>-1},_getTests:function(){var e=[];return e.push([]),e[0].push(this._checkCloseTime),e[0].push(this._checkTimesActivated),e[0].push(this._checkTimesActivatedInSession),e[0].push(this._checkUrl),e[0].push(this._checkSessionNumber),e[0].push(this._checkMinPageViews),e[0].push(this._checkMaxPageViews),e[0].push(this._checkMinTimeOnPage),e[0].push(this._checkMinTimeOnSite),e[0].push(this._checkCustomJavascript),e[0].push(this._checkDepthVisibility),e[0].push(this._checkComponentUVs),e[0].push(this._checkUVs),e.push([]),e[1].push(this._checkLeavingPage),e},_checkComponentUVs:function(){var e=this,t=!0;return _.each(params&&params.components,function(n){n&&n.dependencies&&n.dependencies.uv&&_.each(n.dependencies.uv,function(n){t=t&&e._objHasPath(window.universal_variable||{},n)})}),this.log("activation rule: 'content UVs'.","Will activate?",t),t},_objHasPath:function(e,t){var n=!0,r=e,i=t.split(".");return _.each(i,function(e,t){n&&(r=r[i[t]],n=n&&void 0!==r)}),n},_checkCloseTime:function(){var e=cookieManager.readInt(id,"close_duration"),t=cookieManager.readInt(id,"close_time");if(e&&t){var n=t+1e3*e<this._getTime();return this.log("activation rule: 'block_time'.","Closed at:",new Date(t),"Staying closed till:",new Date(t+1e3*e),"Will activate?",n),n}return!0},_checkTimesActivated:function(){if(params.rules&&params.rules.times_activated){var e=params.rules.times_activated,t=cookieManager.readInt(id,"times_activated"),n=e>t;return this.log("activation rule: 'times_activated'.","Can fire count:",e,"Has fired count:",t,"Will activate?",n),n}return!0},_checkTimesActivatedInSession:function(){if(params.rules&&params.rules.times_activated_session){1===this._getPageViews()&&cookieManager.write(id,"times_activated_session",0);var e=cookieManager.readInt(id,"times_activated_session"),t=params.rules.times_activated_session,n=e<t.value;return this.log("activation rule: 'times_activated_session'.","Can fire count:",t.value,"Has fired count:",e,"Will activate?",n),n}return!0},_checkUVs:function(){if(params.rules){var e=params.rules,t=!0;return _.each(e,function(e,n){if(0===n.indexOf("pageviews__customvalues__uv")){var r=e.key;r=r.replace("pageviews.customvalues.uv","universal_variable");var i=this._getNested(window,r),o=!!this._testUVOperator(e.op,i,e.value);this.log("activation rule: 'universal_variable'.","key:",r,"operator:",e.op,"value:",i,"expected:",e.value,"matched?",o),o||(t=!1)}},this),t}return!0},_getNested:function(e,t){for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e},_testUVOperator:function(e,t,n){return matchCondition({op:e,value:n},t)},_checkUrl:function(){return params.rules&&params.rules.page_url?(this.log(params.rules.page_url),_.any(params.rules.page_url.urls,function(e){var t,n,r,i="n"===e.match_type[0],o=e.match_phrase;o=_.isArray(o)?o:[o];var a=this._getUrl().toLowerCase();switch(e.match_type){case"contains":case"ncontains":n=function(e){return e=e.toLowerCase(),a.indexOf(e)>-1},r="url contains";break;case"regex":case"nregex":n=function(e){return a.match(new RegExp(e,"i"))},r="url matches regex";break;default:this.log("Didn't find an appropriate match type"),n=function(){return!1}}return t=_.some(o,n),t=i?!t:t,this.log("activation rule: '"+r+"'.","search term:",e.match_phrase,"reverse match?",i,"Will trigger? ",t),t},this)):!0},_checkSessionNumber:function(){if(params.rules&&params.rules.session_number){var e,t=params.rules.session_number,n=this._getSessionNumber();switch(t.op){case"eq":e=t.value===n;break;case"neq":e=t.value!==n;break;case"gt":e=t.value<n;break;case"lt":e=t.value>n}return this.log("activation rule: 'session number'",t.op,t.value,".","session number:",n,"Will activate?",e),e}return!0},_checkMinPageViews:function(){if(params.rules&&params.rules.min_page_views){var e=this._getPageViews(),t=!!e&&e>=params.rules.min_page_views;return this.log("activation rule: 'min page view'.","page views:",e,"min page views:",params.rules.min_page_views,"Will activate?",t),t}return!0},_checkMaxPageViews:function(){if(params.rules&&params.rules.max_page_views){var e=this._getPageViews(),t=!!e&&e<=params.rules.max_page_views;return this.log("activation rule: 'max page view'.","page views:",e,"max page views:",params.rules.max_page_views,"Will activate?",t),t}return!0},_checkMinTimeOnPage:function(){if(params.rules&&params.rules.min_time_on_page){var e=when.defer();return this.log("activation rule: 'min time on page'.","min time on page:",params.rules.min_time_on_page),setTimeout(_.bind(function(){this.log("activation rule: 'min time on page'.","time on page satisfied"),e.resolve(!0)},this),1e3*params.rules.min_time_on_page),e.promise}return!0},_checkMinTimeOnSite:function(){if(params.rules&&params.rules.min_time_in_session){var e=(new Date).getTime(),t=cookieManager.readGlobal("session_timer"),n=e-t,r=1e3*params.rules.min_time_in_session;if(n>r)return this.log("activation rule: 'min time on site'.","time on site satisfied"),!0;var i=new when.defer;return setTimeout(_.bind(function(){this.log("activation rule: 'min time on site'.","time on site satisfied"),i.resolve(!0)},this),r-n),i.promise}return!0},_checkCustomJavascript:function(){if(!params.rules||!params.rules.custom_javascript)return!0;var log=this.log,f,ret,d=when.defer(),src=params.rules.custom_javascript;log("activation rule: custom_javascript. status: checking"),src=/^function/.test(src)?"0 || "+src:src;try{if(f=eval("("+src+")"),"function"!=typeof f)return!!f;var resolveCallback=function(e){var t=0===arguments.length||e;log("activation rule: custom_javascript. status:",t?"passed":"failed"),d.resolve(t)};return ret=f(resolveCallback),"boolean"==typeof ret?(log("activation rule: custom_javascript. status:",ret?"passed":"failed"),ret):"undefined"==typeof ret?d.promise:(log("activation rule: custom_javascript. status: invalid_return_type"),!1)}catch(e){return this.log("Error in custom activation:",e.message),!1}},getDocHeight:function(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},windowProperties:function(){var e=document;return{viewportTop:Math.max(e.body.scrollTop,e.documentElement.scrollTop),clientHeight:e.documentElement.clientHeight,docHeight:this.getDocHeight()}},_checkDepthVisibility:function(){function e(){var a,s=o.windowProperties(),u=s.viewportTop,c=s.clientHeight,l=s.docHeight,d=u+c;switch(n){case"pct":u=u/l*100,d=d/l*100;case"top":a=r;break;case"bottom":a=l-r;break;default:return}a>=u&&d>=a&&(i("activation rule: 'scroll position satisfied'.","operator:",n,"expected:",r,"viewport top:",u,"viewport bottom:",d),t.resolve(!0),off(window,"scroll",e))}if(params.rules&&params.rules.scroll_position){var t=when.defer(),n=params.rules.scroll_position.op,r=params.rules.scroll_position.value,i=this.log,o=this;return i("activation rule: 'scroll position required'.","type:",n,"expected:",r),on(window,"scroll",e),e(),t.promise}return!0},_checkLeavingPage:function(){if(!params.rules||!params.rules.leaving_page)return!0;this.log("activation rule: 'leaving page'.","listening");var e=when.defer(),t={debugMode:!1,topHeight:150,moveQueueDepth:2,moveDelay:500,moveVel:500,leftGap:10,attachTime:1e3*(params.rules.leaving_page||1),returnTime:300,eventInterval:100,showProb:1,callBack:_.bind(function(){this.log("activation rule: 'leaving page'.","triggered"),window.q_ef_disable=!0,e.resolve(!0)},this)};try{return exitChecker(t).start(),e}catch(n){return!1}},_getSessionNumber:function(){var e=cookieManager.readCookie("_qst");try{if(e)return e=JSON.parse(e),e[0]>=e[1]?e[0]:e[1]}catch(t){return 1}},_getPageViews:function(){var e=window._qb_ss[0].trackingId,t=cookieManager.readCookie("_qPageNum_"+e);return t=parseInt(t,10),t+=1},_getTime:function(){return(new Date).getTime()},_getUrl:function(){return document.location.href},open:function(e){var t="same_tab"===e.target?"_self":"_blank";window.open(e.url,t),this.report("open",e.reason)},close:function(e){var t=e.behaviour;cookieManager.write(id,"close_time",(new Date).getTime()),"block_time"===t.type&&cookieManager.write(id,"close_duration",t.duration),this.report("close",e.reason),this.layer&&this.layer.destroy()},setLayer:function(e){this.layer=e},sliderShowing:function(e){return _.isBoolean(e)?(e?(this._incrementTimesShown(),window._ss_sliderShowing=!0):window._ss_sliderShowing=!1,void this.trigger("slider:"+(e?"show":"hide"))):!!window._ss_sliderShowing},_incrementTimesShown:function(){var e=cookieManager.readInt(id,"times_activated");cookieManager.write(id,"times_activated",e+1);var t=cookieManager.readInt(id,"times_activated_session");cookieManager.write(id,"times_activated_session",t+1)},on:function(){this.log("start listening to",arguments[0]),VariationManager.on.apply(VariationManager,arguments)},off:function(){this.log("stop listening to",arguments[0]),VariationManager.off.apply(VariationManager,arguments)},trigger:function(){this.log("triggered",arguments[0]),VariationManager.trigger.apply(VariationManager,arguments)},report:function(e,t){window._qtd=window._qtd||[],window._qtd.push({data:{smart_serve:{e:experiment_id,v:variation_id,vm:id,m:params.container.type,f:"deliver_reloaded",a:e,r:t}}})},log:function(){logger.logVariation(id,arguments)},logError:function(){logger.logVariation(id,arguments,!0)},addCustomStyles:function(){params.custom_styles&&(params.custom_styles.error?this.logError("LESS error",params.custom_styles.error):this._addStyleSheet(params.custom_styles))},_addStyleSheet:function(e){var t,n;t=document.getElementsByTagName("head")[0],n=document.createElement("style"),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}};return _.bindAll(vm),vm};return _.extend(VariationManager,Events),VariationManager}),define("when_map",["require","mini_lodash","when"],function(e){return function(t){var n=e("mini_lodash"),r=e("when"),i=n.keys(t),o=n.map(i,function(e){return t[e]}),a=r.defer();return r.all(o).then(function(e){var t={};n.each(i,function(n,r){return t[n]=e[r]}),a.resolve(t)}),a.promise}}),define("data_util",["require","cookie_manager"],function(e){function t(e,n,r){e()?n():(r=(r||0)+1,setTimeout(function(){t(e,n,r)},50*r))}var n=e("cookie_manager");return{visitorId:function(e){t(function(){return n.readCookie("_qubitTracker")},function(){e(n.readCookie("_qubitTracker"))})},trackingId:function(){return window._qb_ss&&window._qb_ss.length>0&&window._qb_ss[0].trackingId?window._qb_ss[0].trackingId:window.location.hostname},cookieDomain:function(){var e;return window._qb_ss&&window._qb_ss.length>0&&(e=window._qb_ss[0].domain),e},protocol:function(){return"https:"===document.location.protocol?"https://":"http://"},supportLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}}}),define("orca",["require","mini_lodash","jquery","when","data_util","json"],function(e){function t(){}var n,r=e("mini_lodash"),i=e("jquery"),o=e("when"),a=e("data_util"),s=e("json"),u=36e5,c=24*u,l=1*c,d="orca.qubitproducts.com/orca",f="_q_visitor",p="_q_lookup_time",g={};return t.prototype.now=function(){return(new Date).getTime()},t.prototype.getItem=function(e){var t=localStorage.getItem(e);if(t)try{t=s.parse(t)}catch(n){t={}}else t={};return t},t.prototype.setItem=function(e,t){localStorage.setItem(e,s.stringify(t))},t.prototype.createRequestUrl=function(e){var t=o.defer();return a.visitorId(function(n){var r=e.endpoint||d;t.resolve([a.protocol(),r,"/",a.trackingId(),"/",n,"?attr=",e.attr].join(""))}),t.promise},t.prototype.recordExpired=function(e){var t=this.getItem(p);if(!t.hasOwnProperty(e.attr))return!0;var n=this.now()-t[e.attr];return n>=(e.expiresInMs||l)},t.prototype.updateRecordTime=function(e){var t=this.getItem(p);t[e.attr]=this.now(),this.setItem(p,t)},t.prototype.getLocalHistory=function(){return this.getItem(f)},t.prototype.resetLocalHistryByPath=function(e,t){var n=t.path.split("."),r=0,i=n.length,o=e;for(r=0;i>r&&o.hasOwnProperty(n[r]);r++){if(i-r===1){delete o[n[r]];break}o=o[n[r]]}return e},t.prototype.updateLocalHistory=function(e,t){var n=this.getLocalHistory();n=this.resetLocalHistryByPath(n,t),n=r.merge(n,e),this.setItem(f,n)},t.prototype.getRemoteHistory=function(e){return this.createRequestUrl(e).then(function(e){return i.when(i.ajax({url:e,crossDomain:!0,dataType:"jsonp"}))})},t.prototype.getJsonValueByPath=function(e,t,r){var i,o=t.split("."),a=0,s=o.length,u=e;for(a=0;s>a;a++){if(!u.hasOwnProperty(o[a])){i=r===n?null:r;break}if(u=u[o[a]],s-a===1){i=u;break}}return i},t.prototype.resolve=function(e,t,n){e.resolve(n.path?this.getJsonValueByPath(t,n.path,n.defaultValue):t)},t.prototype.lookup=function(e){return g||(g={}),g[e.endpoint]||(g[e.endpoint]={}),g[e.endpoint][e.attr]||(g[e.endpoint][e.attr]={}),g[e.endpoint][e.attr][e.path]||(g[e.endpoint][e.attr][e.path]=this._lookup(e)),g[e.endpoint][e.attr][e.path]},t.prototype.clearCache=function(){g={}},t.prototype._lookup=function(e){var t=o.defer();if(!a.supportLocalStorage())return t.reject(),t.promise;var n=this;if(n.recordExpired(e))n.getRemoteHistory(e).then(function(r){n.updateRecordTime(e),n.updateLocalHistory(r,e),n.resolve(t,r,e)},function(){t.reject()});else{var r=n.getLocalHistory(e);n.resolve(t,r,e)}return t.promise},t}),define("segmenter/segments/firstconversiondate",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"firstConversionDate",path:"0.firstConversionDate"})}}),define("segmenter/segments/firstpageviewdate",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"firstPageViewDate",path:"0.firstPageViewDate"})}}),define("segmenter/segments/lastconversiondate",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"lastConversionDate",path:"0.lastConversionDate"})}}),define("geolocation",["require","jquery","when","cookie_manager","data_util","json"],function(e){var t,n=e("jquery"),r=e("when"),i=e("cookie_manager"),o=e("data_util"),a=e("json"),s="_q_geo",u="2",c=function(e){var t=r.defer();return o.visitorId(function(n){var r=o.protocol(),i=o.trackingId();t.resolve(r+e+"?cid="+n+"&id="+i)}),t.promise},l=function(e){return[u,e.ip,e.country,e.region,e.metro_area,e.city,e.latitude,e.longitude]},d=function(e){var t=e[0];return u!==t?null:{version:e[0],ip:e[1],country:e[2],region:e[3],metro_area:e[4],city:e[5],latitude:e[6],longitude:e[7]}},f=function(){var e=i.readCookie(s);if(e)try{e=d(a.parse(e))}catch(t){e=null}else e=null;return e},p=function(e){var t=o.cookieDomain(),n=a.stringify(l(e));i.writeCookie(s,n,1,t)},g=function(e,t,n){e.resolve(n?t[n]:t)},m=function(e,t){var i=r.defer(),o=f();t=t||"orca.qubitproducts.com/ns";var a=function(t){t.geo&&(o=t.geo,p(o),g(i,o,e))};return o?g(i,o,e):c(t).then(function(e){n.ajax({url:e,crossDomain:!0,dataType:"jsonp",success:a,error:function(){i.reject()}})}),i.promise},h=function(){var e={};return t=function(){e={}},function(t,n){return e[n]||(e[n]={}),"undefined"==typeof e[n][t]&&(e[n][t]=m(t,n)),e[n][t]}}();return h.clearCache=t,h}),define("segmenter/segments/lastgeolocation",["require","geolocation"],function(e){return function(){return e("geolocation")("country")}}),define("segmenter/segments/lastgeolocationdetail.city",["geolocation"],function(){return function(){return require("geolocation")("city")}}),define("segmenter/segments/lastgeolocationdetail.metro_area",["require","geolocation"],function(e){return function(){return e("geolocation")("metro_area")}}),define("segmenter/segments/lastgeolocationdetail.region",["geolocation"],function(){return function(){return require("geolocation")("region")}}),define("segmenter/segments/lastpageviewdate",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"lastPageViewDate",path:"0.lastPageViewDate"})}}),define("segmenter/lib/browser_string_search",[],function(){return function(e){for(var t=0;t<e.length;t++){var n=e[t].string;n=n?n:window.navigator.userAgent,n=n.toLowerCase();var r=e[t].prop;if(n){var i,o=e[t].subString.split(",");for(i=0;i<o.length;i++)if(-1!==n.indexOf(o[i].toLowerCase()))return e[t].identity}else if(r)return e[t].identity}}}),define("segmenter/segments/lastuserwebagent.browser",["require","segmenter/lib/browser_string_search"],function(e){var t=e("segmenter/lib/browser_string_search");return function(){var e={init:function(){this.browser=t(this.dataBrowser)||"unknown"},dataBrowser:[{subString:"Silk-Accelerated",identity:"Silk"},{subString:"Googlebot,baiduspider,Google Web Preview,BingPreview",identity:"robot/spider"},{subString:"Camino",identity:"Camino"},{subString:"Opera",identity:"Opera"},{subString:"IEMobile",identity:"IE Mobile"},{subString:"MSIE",identity:"Internet Explorer"},{subString:"Chrome",identity:"Chrome"},{subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{subString:"CriOS,CrMo",identity:"Chrome Mobile"},{subString:"Safari",identity:"Safari"},{subString:"Flock",identity:"Flock"},{string:window.navigator.vendor,subString:"iCab",identity:"iCab"},{subString:"Konqueror",identity:"Konqueror"},{string:window.navigator.vendor,subString:"KDE",identity:"Konqueror"},{subString:"Firefox",identity:"Firefox"},{subString:"Netscape",identity:"Netscape"},{subString:"AppleWebKit",identity:"Apple WebKit"},{subString:"Gecko,Mozilla",identity:"Mozilla"}]};return e.init(),null===e.browser?null:e.browser.toLowerCase()}}),define("segmenter/segments/lastuserwebagent.browser_version",[],function(){return function(){var e,t=navigator.appName,n=navigator.userAgent,r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!==(e=n.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[t,navigator.appVersion,"-?"],r[1]}}),define("segmenter/segments/lastuserwebagent.device_type",["segmenter/lib/browser_string_search"],function(){var e=require("segmenter/lib/browser_string_search");return function(){var t={init:function(){this.browser=e(this.dataBrowser)||"unknown"},dataBrowser:[{subString:"Slurp,Baiduspider,Googlebot,Seznam,masking-agent,CrOS",identity:"unknown"},{subString:"GoogleTV",identity:"digital media receiver"},{subString:"NintendoBrowser,PlayStation",identity:"Game Console"},{subString:"WOW64,IBIS,Macintosh,Linux i686,Windows NT,Linux Mint,Linux Next",identity:"computer"},{subString:"iPad,Opera,Tab,TouchPad,Nexus 7,Nexus 10,GT-N,Pad,GT-P,IdeaTab,SM-T,HP Slate,Xoom,Aurora-II,ME301T,A1-810,A1-811,NookHD,PMP5880D,QUANTUM7,Kindle Fire,KFTT,KFOT,KFJWI,KFJWA,KFSOWI,KFTHWI,KFTHWA,KFAPWI,KFAPWA,Silk,SGP3,Nook HD,Transformer,AT300,COBALT,MOMO,Sweet M,ARCHOS,NOOK,NABI2,MZ60,Vega,Slider,MID7,Streak,LePanII,HTC_Flyer,JRO03H,BNTV400,A500,KFTT Build,M805,POM727MC,cm_tenderloin",identity:"tablet"},{subString:"iPhone,iPod,iOS,IEMobile,Mobile,Opera Mobi",identity:"mobile"},{subString:"",identity:"computer"}]};return t.init(),null===t.browser?null:t.browser.toLowerCase()}}),define("segmenter/segments/numconversions",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"numConversions",path:"0.numConversions",defaultValue:0})}}),define("segmenter/segments/pageviews.entrance.referrerdetails.search_keywords",[],function(){return function(){try{var e=decodeURIComponent((new RegExp("[?|&]q=([^&;]+?)(&|#|;|$)").exec(document.referrer)||[,""])[1].replace(/\+/g,"%20").replace("/",""))||"";return e.toLowerCase()}catch(t){return""}}}),define("segmenter/segments/pageviews.entrance.referrertype",[],function(){return function(){var e=document.referrer,t=document.location.href,n=function(e){return e&&e.length>0?!0:!1},r=function(t){return n(e.match(t))},i=function(e){return n(t.match(e))},o=r(/^(?![^\?]*(https?:\/\/)?(mail|messag)).*/)||r(/(http:\/\/)?(www\.)?search\..*/)||r(/https?:\/\/([\-a-z]+\.search-results)\.com.*/)||r(/https?:\/\/(yourbestsearch)\.net.*/)||r(/https?:\/\/www\.(k9safesearch)\.com.*/)||r(/https?:\/\/(optu\.search-help)\.net.*/)||r(/https?:\/\/(www.)?(suche\.(t-online|web))\.de.*/)||r(/https?:\/\/www\.(t-mobile[\-a-z\/\.]+)\/search.*/)||r(/https?:\/\/www\.(talktalk)\.co\.uk\/search.*/)||r(/https?:\/\/(isearch\.(babylon|avg))\.com.* /)||r(/https?:\/\/(search(completion|ya))\.com.*/)||r(/https?:\/\/(advancedsearch\d\.virginmedia)\.com.*/)||r(/https?:\/\/(www.)?google.*/)||r(/https?:\/\/mybroadband.three.co.uk\/[^?#]*\/search_results.html.*/);if(i(/.*utm_medium=e-?mail.*/)||r(/[^?]*mail\.(aol|live|yahoo)\.com.*/)||r(/[^?]mail\.yahoo\.net.*/)||r(/.*\?mail=.*/)||r(/[^?]*(e|fs)mail\d\d\.(orange)\.co\.uk.*/)||r(/https?:\/\/(webmail).*/)||r(/[^?]*m\.(yahoo)\.com\/[a-z]+\/[a-z]+-mail\/.*/)||r(/https?:\/\/(messagingsuite\.(orange)|messagerie(pro|-\d{1,2})?\.(\w+))\..*/)||r(/https?:\/\/[a-z0-9]{6}\d{4}\.(outlook)\.com\/.*/)||r(/https?:\/\/posta\d\d?[a-z]\.mailbeta\.(libero)\.it.*/)||r(/https?:\/\/[mw]\d+\.mail\.(qq)\.com.*/)||r(/https?:\/\/(mail(-attachment|er|box[a-z]*|\d[a-z0-9]*)?)\.[\-a-z0-9\.]+\/.*/)||r(/https?:\/\/(www\.)?(email\d{0,3})\.[\-a-z0-9\.]+\/.*/)||i(/.*INT_[A-Z]+_EM.*/)||i(/.*s_emcid.*/))return"email";if(i(/.*utm_medium=(cse|vertical_search|comparison-?shopping).*/)||r(/.*google.*productsearch.*/)||r(/.*yell\.com.*/)||r(/.*(shopzilla).*/)||i(/.*[\?|&]s_pccid=.*/))return"vertical search";if(!(!r(/^$/)||!i(/.+/)||i(/.*gclid.*/)||i(/.*utm_source=.*/)||i(/.*s_kenid=.*/)||i(/.*bfdqbt=.*/)||i(/.*s_dscid=.*/)||i(/.*[\?|&]source=[0-9]*.*/)))return"direct";if((i(/.*utm_medium=(cpc|ppc|sem|paid_search).*/)||i(/.*gclid=.*/)&&r(/.*(google|bing|yahoo|ask)\..*/)||i(/.*gclid=.*/)&&""===document.referrer||i(/.*s_kenid=.*/)||i(/.*s_kwcid.*/)||r(/https?:\/\/[a-z\.]*google(adservices)?.*(\.[a-z]{2})?(\/(m|hws))?\/((pagead\/)?aclk|uds\/afs)\?.*/))&&!r(/.*chatzum\.com.*/))return"sem";if(i(/.*[&\?]gclid=.*/)&&!r(/.*(google|bing|yahoo|ask)\..*/)&&""!==document.referrer||i(/.*utm_medium=(display|banner|Display|retargeting).*/)||r(/[^?]*\.(criteo)\.(com|net)\/.*/)||r(/[^?]*\.(struq)\.(com|net)\/.*/)||i(/.*utm_source=(struq).*/)||r(/http:\/\/[a-z\.]+\.(doubleclick)\..*/)||r(/.*utm_source=criteo.*/)||r(/.*utm_source=banner.*/)||r(/.*doubleclick.net.*/)||i(/.*[&\?]s_dscid=.*/))return"display";if(i(/.*utm_medium=affiliate.*/)||i(/.*utm_source=awin.*/)||r(/https?:\/\/(?!www)([^\/]+)\.polyvore.com\/.*/)||r(/http:\/\/[^\/]+\.shopstyle\..*/)||r(/.*(shopping-time|shoerazzi|leblogdebetty|hotukdeals.com|ipad-stock|offeroftheday|lyst|upscalehype|studentbeans|commeuncamion|collegefashion|promocodefor|easyfundraising|discountvouchers|money.co.uk|quidco|myvouchercodes|coolspotters|polyvore|rstyle|vouchercodes).*/)||i(/.*[&\?]source=[0-9]*.*/))return"affiliate";var a=r(/http(s)?:\/\/.*(facebook|pinterest|vk|tumblr|reddit|youtube|blogspot|squidoo|odnoklassniki|vk\.com).*/);return r(/.*(bt\.com).*/)||r(/.*google.*/)||!(i(/.*utm_medium=social.*/)||a||r(/.*[&\?]eid=[^=]{1,100}.*/)||r(/.*t\.co.*/))?o&&!a?"seo":"other":"social"}}),define("segmenter/segments/pageviews.entrance.referrerurl.url",[],function(){return function(){return document.referrer}}),define("segmenter/segments/pageviews.sessionnumber",["require","cookie_manager","json"],function(e){return function(){var t=e("cookie_manager"),n=e("json"),r=t.readCookie("_qst");try{if(r)return r=n.parse(r),r[0]>=r[1]?r[0]:r[1]}catch(i){return null}}}),define("segmenter/segments/pageviews.url",[],function(){return function(){return document.location.href}}),define("segmenter/segments/totalconversionvalue.gbp",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"totalConversionValueGBP",path:"0.totalConversionValueGBP"})}}),define("segmenter/segments/totalconversionvalue",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"totalConversionValueBASE",path:"0.totalConversionValueBASE"})}}),define("segmenter/segments/totalpagenum",["require","orca"],function(e){return function(){var t=e("orca");return(new t).lookup({attr:"totalPageNum",path:"0.totalPageNum"})}}),define("segmenter/segments/custom_javascript",[],function(){return function(){}}),define("segmenter/segments/uv",["require","mini_lodash"],function(e){function t(e,t){return n.reduce(t.split("."),function(e,t){return e&&e[t]},e)}var n=e("mini_lodash");return function(e){return t(window,e.replace("pageviews.customvalues.uv","universal_variable"))}}),define("segmenter/lib/get_segment_value",["require","../segments/firstconversiondate","../segments/firstpageviewdate","../segments/lastconversiondate","../segments/lastgeolocation","../segments/lastgeolocationdetail.city","../segments/lastgeolocationdetail.metro_area","../segments/lastgeolocationdetail.region","../segments/lastpageviewdate","../segments/lastuserwebagent.browser","../segments/lastuserwebagent.browser_version","../segments/lastuserwebagent.device_type","../segments/numconversions","../segments/pageviews.entrance.referrerdetails.search_keywords","../segments/pageviews.entrance.referrertype","../segments/pageviews.entrance.referrerurl.url","../segments/pageviews.sessionnumber","../segments/pageviews.url","../segments/totalconversionvalue.gbp","../segments/totalconversionvalue","../segments/totalpagenum","../segments/custom_javascript","../segments/uv"],function(e){function t(e){return 0===e.indexOf("pageviews.customvalues.uv")}e("../segments/firstconversiondate"),e("../segments/firstpageviewdate"),e("../segments/lastconversiondate"),e("../segments/lastgeolocation"),e("../segments/lastgeolocationdetail.city"),e("../segments/lastgeolocationdetail.metro_area"),e("../segments/lastgeolocationdetail.region"),e("../segments/lastpageviewdate"),e("../segments/lastuserwebagent.browser"),e("../segments/lastuserwebagent.browser_version"),e("../segments/lastuserwebagent.device_type"),e("../segments/numconversions"),e("../segments/pageviews.entrance.referrerdetails.search_keywords"),e("../segments/pageviews.entrance.referrertype"),e("../segments/pageviews.entrance.referrerurl.url"),e("../segments/pageviews.sessionnumber"),e("../segments/pageviews.url"),e("../segments/totalconversionvalue.gbp"),e("../segments/totalconversionvalue"),e("../segments/totalpagenum"),e("../segments/custom_javascript");var n={};return function(r){return t(r)?e("../segments/uv")(r):(n[r]||(n[r]=e("../segments/"+r)()),n[r])}}),define("segmenter/fetch_segments",["require","mini_lodash","when_map","./lib/get_segment_value"],function(e){var t=e("mini_lodash"),n=e("when_map"),r=e("./lib/get_segment_value");return function(e){var i=t.reduce(e,function(e,t){return e[t]=r(t),e},{});return n(i)}}),define("segmenter/match_condition",["match_condition"],function(){function evaluateCode(condition){return condition.value?eval("(function () { var fn = "+condition.value+"; return fn(); })();"):!0}var matchCondition=require("match_condition");return function(e,t){switch(e.type){case"string":case"number":case"date":case"boolean":return matchCondition(e,t);case"code":return evaluateCode(e)}}}),define("segment",["require","mini_lodash","logger","segmenter/fetch_segments","segmenter/match_condition"],function(e){var t=e("mini_lodash"),n=e("logger"),r=e("segmenter/fetch_segments"),i=e("segmenter/match_condition");return function(e,o){function a(){n.logExperiment(e,arguments)}function s(e,t,n){a("segment filter:",JSON.stringify(e),"value:",t,"matches?",n)}return a("segmenting"),r(t.pluck(o,"key")).then(function(e){return t.every(o,function(t){var n=i(t,e[t.key]);return s(t,e[t.key],n),n})}).then(function(e){return a(e?"user is in the segment":"user is not in the segment"),e}).otherwise(function(e){a("segmentation errored",e)})}}),function(){function evaluateExecution(code){try{eval("var fn = "+code+"; fn()")}catch(err){throw window._ss_debug&&window.console&&window.console.error&&window.console.error("Execution failed",err),err}}function deliverReloaded(e){var t,n=e.params.dependencies,r=[];for(t in n)n.hasOwnProperty(t)&&r.push(t+"@"+n[t]);require(r,function(){var r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=require(t+"@"+n[t]));e.params.modules=r;var i=r["@qubit/layer"]?"@qubit/layer":"layer",o=require(i+"@"+n[i]),a=new o({close:function(t){switch(e.vm.sliderShowing(!1),t.duration&&(t.duration=parseInt(t.duration,10)),t.type){case"days":t.type="block_time",t.duration=24*t.duration*60*60;break;case"minutes":t.type="block_time",t.duration=60*t.duration}e.vm.close({behaviour:t})}},e.params),s=!0;a.isExclusive()?e.vm.sliderShowing()?(s=!1,a.destroy()):e.vm.sliderShowing(!0):e.vm._incrementTimesShown(),s&&(a.run(),e.vm.setLayer(a)),a.on&&(a.on("show",function(){e.vm.sliderShowing(!0)}),a.on("log",function(){e.vm.log.apply(e.vm,arguments)}),a.on("hide",function(){e.vm.sliderShowing(!1)}),a.on("destroy",function(){e.vm.close()}))})}require.config({paths:{jquery:"//dd6zx4ibq538k.cloudfront.net/jquery.1.8.2.nc.min","deliver-modules":"//d22rutvoghj3db.cloudfront.net/deliver-modules"},map:{"*":{cookieman:"cookieman","match-condition":"match-condition",base64Int:"base64Int"}},packages:[{name:"cookieman",main:"cookieman",location:"cookieman/lib"},{name:"match-condition",main:"index",location:"match-condition"},{name:"base64Int",main:"index",location:"base64Int"}],waitSeconds:60,skipDataMain:!0}),window.__qubit=window.__qubit||{},window.__qubit.amd={define:define,require:require},window.__qubit.smartserve={version:"1.1.0"},define("main-ss",["require","etc.widget/etc","variation_manager","logger","segment","cookie_manager","etc.widget/lib/compressed_cookie"],function(e){function t(e){try{window["v_"+e.id]=function(){var t=e.params,n=i(e.id,e.creative_id,e.experiment_id,t),r={id:e.id,activation:n.activation,vm:n,params:t};return r}()}catch(t){window.console&&console.log&&o.logVariation(e.id,"Exception while creating variation "+e.id,t)}}var n,r=e("etc.widget/etc"),i=e("variation_manager"),o=e("logger"),a=e("segment");window.__qubit.smartserve.start=function(){n?n.start():n=r()},window._qb_ss=[],window._qb_ss.push({domain:".m.direct.asda.com",trackingId:"asda_mobile",experiments:[{id:19966,goals:[],iterationId:40479,targetingCriteria:[19966]},{id:21043,goals:[],iterationId:43114,targetingCriteria:[21043]}],targetingCriteria:{19966:{id:19966,condition:function(e){a(Number(19966),[{key:"lastuserwebagent.browser",type:"string",op:"eq",value:"safari"},{key:"lastuserwebagent.device_type",type:"string",op:"eq",value:"mobile"},{key:"custom_javascript",type:"code",value:""}]).then(function(t){t&&e()
})},creatives:[[{id:89691,p:.5},{id:89692,p:.5}]]},21043:{id:21043,condition:function(e){a(Number(21043),[{key:"custom_javascript",type:"code",value:""}]).then(function(t){t&&e()})},creatives:[[{id:95724,p:0},{id:95725,p:1}]]}},creatives:{89691:{id:89691,creative_id:89691,e_id:19966,activation:function(e){v_89691.activation(e)},execution:function(){v_89691.vm._incrementTimesShown()},control:!0},89692:{id:89692,creative_id:89692,e_id:19966,activation:function(e){v_89692.activation(e)},execution:function(){v_89692.vm._incrementTimesShown(),v_89692.vm.addCustomStyles(),evaluateExecution(v_89692.params.execution_code)},control:!1},95724:{id:95724,creative_id:95724,e_id:21043,activation:function(e){v_95724.activation(e)},execution:function(){v_95724.vm._incrementTimesShown()},control:!0},95725:{id:95725,creative_id:95725,e_id:21043,activation:function(e){v_95725.activation(e)},execution:function(){v_95725.vm._incrementTimesShown(),v_95725.vm.addCustomStyles(),evaluateExecution(v_95725.params.execution_code)},control:!1}},cookieCompression:!1,virtualPageViewOverlap:!1,preventSegmentationPing:!1}),window._qb_ss_alt_domain&&(window._qb_ss[0].domain=window._qb_ss_alt_domain);var s=e("cookie_manager"),u=e("etc.widget/lib/compressed_cookie");window.__qubit=window.__qubit||{},window.__qubit.deliver=window.__qubit.deliver||{},window.__qubit.deliver.cookie=u.api(),s.readCookie=u.readCookie;var c=(new Date).getTime(),l=(s.readGlobal("session_timer"),s.readGlobal("refresh_timer"));(!l||c-l>18e5)&&s.writeGlobal("session_timer",c),s.writeGlobal("refresh_timer",c);for(var d,f=[{id:89691,creative_id:89691,experiment_id:19966,params:{rules:{page_url:{urls:[{match_type:"contains",match_phrase:"george"}]},times_activated:1,custom_javascript:'function (cb) {\n  var waitForjQuery = function (time) {\n    time = time || 50;\n    var $ = window.jQuery;\n    if ($) {\n      cb();\n    } else {\n      setTimeout(function () {\n        waitForjQuery(time * 2);\n      }, time);\n    }\n  };\n  \n  waitForjQuery();\n  \n  var rememberPreview = function (minutes) {\n  minutes = minutes || 15;\n  if (document.location.href.indexOf("etcForceCreative=") !== -1) {\n    var creative = document.location.href.match(/etcForceCreative=([^\\&]+)(&|$)/);\n    var date = new Date();\n    date.setTime(date.getTime() + (minutes * 60 * 1000));\n    document.cookie = "smartserve_preview=true; expires=" + date.toGMTString() + "; path=/";\n    document.cookie = "etcForceCreative=[" + creative[1] + "]; expires=" + date.toUTCString() + "; path=/";\n  }\n};\n\nrememberPreview();\n}'}}},{id:89692,creative_id:89692,experiment_id:19966,params:{version:"3.0.1",container:{type:"@qubit/slider",overlay:!0,__style:{shadow:"none"}},dependencies:{"@qubit/slider":"1.0.0","@qubit/layer":"1.0.0"},components:[],rules:{page_url:{urls:[{match_type:"contains",match_phrase:"george"}]},times_activated:1,custom_javascript:'function (cb) {\n  var waitForjQuery = function (time) {\n    time = time || 50;\n    var $ = window.jQuery;\n    if ($) {\n      cb();\n    } else {\n      setTimeout(function () {\n        waitForjQuery(time * 2);\n      }, time);\n    }\n  };\n  \n  waitForjQuery();\n  \n  var rememberPreview = function (minutes) {\n  minutes = minutes || 15;\n  if (document.location.href.indexOf("etcForceCreative=") !== -1) {\n    var creative = document.location.href.match(/etcForceCreative=([^\\&]+)(&|$)/);\n    var date = new Date();\n    date.setTime(date.getTime() + (minutes * 60 * 1000));\n    document.cookie = "smartserve_preview=true; expires=" + date.toGMTString() + "; path=/";\n    document.cookie = "etcForceCreative=[" + creative[1] + "]; expires=" + date.toUTCString() + "; path=/";\n  }\n};\n\nrememberPreview();\n}'},execution_code:"function () {\n  var $ = window.jQuery;\n  var $img = $(\"<div class='qb58prompt'><img class='qbimage' src='https://d1m54pdnjzjnhe.cloudfront.net/asda/t058/t058prompt.png' /><div class='qbclose'></div>\");\n  $('body').append($img);\n  setTimeout(function(){\n    $(\".qb58prompt\").fadeOut();\n  }, 5000);\n  $(\".qbclose\").click(function(){\n    $(\".qb58prompt\").fadeOut();\n  });\n}",custom_styles:".qb58prompt{position:fixed;bottom:0px;width:230px;background:transparent;left:50%;margin-left:-115px}.qb58prompt .qbclose{width:30px;height:30px;position:absolute;margin-top:-95px;margin-left:205px}"}},{id:95724,creative_id:95724,experiment_id:21043,params:{rules:{custom_javascript:'function (cb) {\n  var rememberPreview = function (minutes) {\n    minutes = minutes || 15;\n    if (document.location.href.indexOf("etcForceCreative=") !== -1) {\n      var creative = document.location.href.match(/etcForceCreative=([^\\&]+)(&|$)/);\n      var date = new Date();\n      date.setTime(date.getTime() + (minutes * 60 * 1000));\n      document.cookie = "smartserve_preview=true; expires=" + date.toGMTString() + "; path=/";\n      document.cookie = "etcForceCreative=[" + creative[1] + "]; expires=" + date.toUTCString() + "; path=/";\n    }\n  };\n  \n  rememberPreview();\n  \n  var waitForjQuery = function (time) {\n    time = time || 50;\n    var $ = window.jQuery;\n    var uv = universal_variable;\n    if ($ && uv && uv.Product && $(".deliveryIcons li").length) {\n      setTimeout(function(){\n        if ($(".international").length === 0){\n          cb();   \n        }\n      }, 250);\n    } else {\n      setTimeout(function () {\n        waitForjQuery(time * 2);\n      }, time);\n    }\n  };\n  \n  waitForjQuery();\n  \n}'}}},{id:95725,creative_id:95725,experiment_id:21043,params:{version:"3.0.1",container:{type:"@qubit/slider",overlay:!0,__style:{shadow:"none"}},components:[],dependencies:{"@qubit/layer":"^1.0.0","@qubit/deliver":"^1.0.0"},rules:{custom_javascript:'function (cb) {\n  var rememberPreview = function (minutes) {\n    minutes = minutes || 15;\n    if (document.location.href.indexOf("etcForceCreative=") !== -1) {\n      var creative = document.location.href.match(/etcForceCreative=([^\\&]+)(&|$)/);\n      var date = new Date();\n      date.setTime(date.getTime() + (minutes * 60 * 1000));\n      document.cookie = "smartserve_preview=true; expires=" + date.toGMTString() + "; path=/";\n      document.cookie = "etcForceCreative=[" + creative[1] + "]; expires=" + date.toUTCString() + "; path=/";\n    }\n  };\n  \n  rememberPreview();\n  \n  var waitForjQuery = function (time) {\n    time = time || 50;\n    var $ = window.jQuery;\n    var uv = universal_variable;\n    if ($ && uv && uv.Product && $(".deliveryIcons li").length) {\n      setTimeout(function(){\n        if ($(".international").length === 0){\n          cb();   \n        }\n      }, 250);\n    } else {\n      setTimeout(function () {\n        waitForjQuery(time * 2);\n      }, time);\n    }\n  };\n  \n  waitForjQuery();\n  \n}'},execution_code:'function () {\n  var html = [\'<li class="international" style="z-index: 111;">\',\n  \'<img alt="UK delivery" class="qbplane" src="https://s3-eu-west-1.amazonaws.com/qubit-etc/asda/t075/plane_final.png">\',\n  \'<span class="">UK delivery only</span>\'\n  ].join("");\n  \n  $(".deliveryIcons").append(html);\n  \n  if($(".yellowHr").length) {\n    $(".international").addClass("ybinternational");\n  }\n  if($(".deliveryIcons li").length < 3){\n    $(".international").addClass("ybinternational");\n  }\n}',custom_styles:".qbplane{height:30px;padding-left:4px!important}.international{margin-top:5px!important}.ybinternational{margin-top:13px!important}"}}],p=0;p<f.length;p++)d=t(f[p]);window.__qubit.smartserve.start()})}(),require(["main-ss"])}}();